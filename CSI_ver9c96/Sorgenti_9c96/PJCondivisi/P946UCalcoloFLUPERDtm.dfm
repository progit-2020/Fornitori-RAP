inherited P946FCalcoloFLUPERDtm: TP946FCalcoloFLUPERDtm
  OldCreateOrder = True
  Height = 411
  Width = 785
  object selP660: TOracleDataSet
    SQL.Strings = (
      'SELECT * FROM P660_FLUSSIREGOLE P660   '
      ' WHERE DECORRENZA = (SELECT MAX(DECORRENZA)'
      '                       FROM P660_FLUSSIREGOLE'
      '                      WHERE DECORRENZA <= :DATAELABORAZIONE'
      '                        AND NOME_FLUSSO='#39'FLUPER'#39
      '                        AND PARTE=P660.PARTE'
      '                        AND NUMERO=P660.NUMERO)'
      '   AND NOME_FLUSSO='#39'FLUPER'#39' '
      'ORDER BY PARTE, NUMERO')
    Optimize = False
    Variables.Data = {
      0400000001000000220000003A00440041005400410045004C00410042004F00
      520041005A0049004F004E0045000C0000000000000000000000}
    OracleDictionary.DefaultValues = True
    QBEDefinition.QBEFieldDefs = {
      050000000C0000000800000041004E004E004F000100000000000A0000005000
      41005200540045000100000000000C0000004E0055004D00450052004F000100
      00000000160000004400450053004300520049005A0049004F004E0045000100
      00000000100000004E0055004D0045005200490043004F000100000000002400
      000043004F0044005F004100520052004F0054004F004E00440041004D004500
      4E0054004F000100000000000E00000046004F0052004D00410054004F000100
      00000000180000004F004D0045005400540049005F00560055004F0054004F00
      010000000000320000005200450047004F004C0041005F00430041004C004300
      4F004C004F005F004100550054004F004D004100540049004300410001000000
      00002C0000005200450047004F004C0041005F00430041004C0043004F004C00
      4F005F004D0041004E00550041004C0045000100000000002600000052004500
      47004F004C0041005F004D004F00440049004600490043004100420049004C00
      45000100000000001000000043004F004D004D0045004E0054004F0001000000
      0000}
    Left = 242
    Top = 16
  end
  object delP663: TOracleQuery
    SQL.Strings = (
      'DELETE P663_FLUSSIDATIINDIVIDUALI '
      ' WHERE ID_FLUSSO = :IdFLUPER '
      '   AND PROGRESSIVO = :Progressivo'
      '   AND PARTE = :Parte'
      '   :Numero')
    Optimize = False
    Variables.Data = {
      0400000004000000180000003A00500052004F00470052004500530053004900
      56004F00030000000000000000000000120000003A004900440046004C005500
      5000450052000300000000000000000000000C0000003A005000410052005400
      45000500000000000000000000000E0000003A004E0055004D00450052004F00
      010000000000000000000000}
    Left = 309
    Top = 133
  end
  object T430A: TOracleDataSet
    SQL.Strings = (
      'SELECT T030.matricola, '
      '       T030.cognome, '
      '       T030.nome, '
      '       T030.sesso, '
      '       T030.datanas, '
      '       T030.comunenas, '
      '       T030.capnas, '
      '       T030.codfiscale, '
      '       T030.inizioservizio, '
      '       T030.rapporti_uniti,'
      '       T430.* '
      '  FROM T430_STORICO T430, T030_ANAGRAFICO T030'
      ' WHERE T030.PROGRESSIVO=T430.PROGRESSIVO'
      '   AND T430.PROGRESSIVO=:PROGRESSIVO'
      '   AND T430.DATADECORRENZA=(SELECT MAX(DATADECORRENZA) '
      '                              FROM T430_STORICO '
      
        '                             WHERE PROGRESSIVO = T430.PROGRESSIV' +
        'O '
      
        '                               AND :DATAELABORAZIONE BETWEEN DAT' +
        'ADECORRENZA AND DATAFINE)')
    Optimize = False
    Variables.Data = {
      0400000002000000220000003A00440041005400410045004C00410042004F00
      520041005A0049004F004E0045000C0000000000000000000000180000003A00
      500052004F0047005200450053005300490056004F0003000000000000000000
      0000}
    QBEDefinition.QBEFieldDefs = {
      05000000010000001600000043004F004C0055004D004E005F004E0041004D00
      4500010000000000}
    Left = 72
    Top = 72
  end
  object OperSql: TOracleDataSet
    ReadBuffer = 100
    Optimize = False
    CommitOnPost = False
    Left = 138
    Top = 133
  end
  object scrP663: TOracleQuery
    SQL.Strings = (
      'BEGIN'
      '  UPDATE P663_FLUSSIDATIINDIVIDUALI '
      '     SET ID_FLUSSO = :IdFLUPER, '
      '         PROGRESSIVO = :Progressivo, '
      '         PARTE = :Parte, '
      '         NUMERO = :Numero,'
      '         PROGRESSIVO_NUMERO = :ProgressivoNumero, '
      '         TIPO_RECORD = :TipoRecord, '
      '         VALORE = :Valore'
      '   WHERE ID_FLUSSO = :IdFLUPER '
      '     AND PROGRESSIVO = :Progressivo '
      '     AND PARTE = :Parte '
      '     AND NUMERO = :Numero '
      '     AND PROGRESSIVO_NUMERO = :ProgressivoNumero '
      '    AND TIPO_RECORD = :TipoRecord;'
      '  IF SQL%ROWCOUNT = 0 THEN'
      '    INSERT INTO P663_FLUSSIDATIINDIVIDUALI'
      
        '      (ID_FLUSSO, PROGRESSIVO, PARTE, NUMERO, PROGRESSIVO_NUMERO' +
        ', TIPO_RECORD, VALORE)'
      '    VALUES'
      
        '      (:IdFLUPER, :Progressivo, :Parte, :Numero, :ProgressivoNum' +
        'ero, :TipoRecord, :Valore);'
      '  END IF;'
      'END;')
    Optimize = False
    Variables.Data = {
      04000000070000000E0000003A00560041004C004F0052004500050000000000
      0000000000000C0000003A005000410052005400450005000000000000000000
      00000E0000003A004E0055004D00450052004F00050000000000000000000000
      240000003A00500052004F0047005200450053005300490056004F004E005500
      4D00450052004F00030000000000000000000000160000003A00540049005000
      4F005200450043004F0052004400050000000000000000000000180000003A00
      500052004F0047005200450053005300490056004F0003000000000000000000
      0000120000003A004900440046004C0055005000450052000300000000000000
      00000000}
    Left = 18
    Top = 134
  end
  object TabellaTemporaneaB1_36: TClientDataSet
    Aggregates = <>
    Params = <>
    Left = 408
    Top = 136
  end
  object T430B1_36: TOracleDataSet
    SQL.Strings = (
      'SELECT T030.matricola, '
      '       T030.cognome, '
      '       T030.nome, '
      '       T030.sesso, '
      '       T030.datanas, '
      '       T030.comunenas, '
      '       T030.capnas, '
      '       T030.codfiscale, '
      '       T030.inizioservizio, '
      '       T030.rapporti_uniti,'
      '       T430.* '
      '  FROM T430_STORICO T430, T030_ANAGRAFICO T030'
      ' WHERE T030.PROGRESSIVO=T430.PROGRESSIVO'
      
        '   AND (T430.DATADECORRENZA <= :DATAFINEELABORAZIONE AND T430.DA' +
        'TAFINE >= :DATAINIZIOELABORAZIONE) '
      '   AND T430.PROGRESSIVO=:PROGRESSIVO'
      ' ORDER BY T430.DATADECORRENZA'
      '')
    Optimize = False
    Variables.Data = {
      04000000030000002A0000003A004400410054004100460049004E0045004500
      4C00410042004F00520041005A0049004F004E0045000C000000000000000000
      00002E0000003A00440041005400410049004E0049005A0049004F0045004C00
      410042004F00520041005A0049004F004E0045000C0000000000000000000000
      180000003A00500052004F0047005200450053005300490056004F0003000000
      0000000000000000}
    QBEDefinition.QBEFieldDefs = {
      05000000010000001600000043004F004C0055004D004E005F004E0041004D00
      4500010000000000}
    Left = 136
    Top = 72
  end
  object selP442: TOracleDataSet
    SQL.Strings = (
      
        'SELECT P216.COD_VOCE,P216.COD_VOCE_SPECIALE,P442.ORIGINE,LAST_DA' +
        'Y(P442.DATA_COMPETENZA_A) COMPETENZA,'
      
        '  P216.COD_TIPOACCORPAMENTOVOCI,P216.COD_CODICIACCORPAMENTOVOCI,' +
        'SUM(P442.IMPORTO*P216.PERCENTUALE/100) IMPORTO'
      
        '  FROM P216_ACCORPAMENTOVOCI P216,P441_CEDOLINO P441, P442_CEDOL' +
        'INOVOCI P442'
      '  WHERE P441.PROGRESSIVO = :Progressivo'
      '  AND P441.DATA_CEDOLINO = :DataElaborazione'
      
        '  AND P441.CHIUSO IN (:StatoCedolini) AND P441.TIPO_CEDOLINO <> ' +
        #39'RP'#39
      '  AND P441.ID_CEDOLINO = P442.ID_CEDOLINO'
      '  AND P442.COD_CONTRATTO = P216.COD_CONTRATTO'
      '  AND P442.COD_VOCE = P216.COD_VOCE'
      '  AND P442.COD_VOCE_SPECIALE = P216.COD_VOCE_SPECIALE'
      '  AND P442.TIPO_RECORD = '#39'M'#39
      '  AND P442.IMPORTO <> 0'
      '  AND P216.COD_CONTRATTO = :Contratto'
      '  AND DECORRENZA = '
      
        '    (SELECT MAX(DECORRENZA) FROM P216_ACCORPAMENTOVOCI P216A WHE' +
        'RE'
      '       P216.COD_CONTRATTO = P216A.COD_CONTRATTO'
      '       AND P216.COD_VOCE = P216A.COD_VOCE'
      '       AND P216.COD_VOCE_SPECIALE = P216A.COD_VOCE_SPECIALE'
      
        '       AND P216.COD_TIPOACCORPAMENTOVOCI = P216A.COD_TIPOACCORPA' +
        'MENTOVOCI'
      
        '       AND P216.COD_CODICIACCORPAMENTOVOCI = P216A.COD_CODICIACC' +
        'ORPAMENTOVOCI'
      '       AND P216.DECORRENZA <= :DataElaborazione)'
      
        '  AND P216.COD_TIPOACCORPAMENTOVOCI||P216.COD_CODICIACCORPAMENTO' +
        'VOCI IN '
      
        '    (SELECT DISTINCT SUBSTR(NOME_DATO,1,INSTR(NOME_DATO,'#39'.'#39') - 1' +
        ')||'
      
        '     SUBSTR(NOME_DATO,INSTR(NOME_DATO,'#39'.'#39') + 1,LENGTH(NOME_DATO)' +
        ') ACCORPAMENTO_VOCI'
      
        '     FROM P660_FLUSSIREGOLE P660 WHERE NOME_FLUSSO = '#39'FLUPER'#39' AN' +
        'D INSTR(NOME_DATO,'#39'.'#39') > 0 '
      
        '     AND P660.DECORRENZA = (SELECT MAX(DECORRENZA) FROM P660_FLU' +
        'SSIREGOLE '
      
        '       WHERE NOME_FLUSSO = '#39'FLUPER'#39' AND DECORRENZA <= :DataElabo' +
        'razione AND PARTE=P660.PARTE AND NUMERO=P660.NUMERO)'
      '    )'
      
        '  GROUP BY P216.COD_VOCE,P216.COD_VOCE_SPECIALE,P442.ORIGINE,LAS' +
        'T_DAY(P442.DATA_COMPETENZA_A),'
      
        '    P216.COD_TIPOACCORPAMENTOVOCI,P216.COD_CODICIACCORPAMENTOVOC' +
        'I')
    Optimize = False
    Variables.Data = {
      0400000004000000220000003A00440041005400410045004C00410042004F00
      520041005A0049004F004E0045000C0000000000000000000000180000003A00
      500052004F0047005200450053005300490056004F0003000000000000000000
      0000140000003A0043004F004E00540052004100540054004F00050000000000
      0000000000001C0000003A0053005400410054004F004300450044004F004C00
      49004E004900010000000000000000000000}
    OracleDictionary.DefaultValues = True
    QBEDefinition.QBEFieldDefs = {
      050000000C0000000800000041004E004E004F000100000000000A0000005000
      41005200540045000100000000000C0000004E0055004D00450052004F000100
      00000000160000004400450053004300520049005A0049004F004E0045000100
      00000000100000004E0055004D0045005200490043004F000100000000002400
      000043004F0044005F004100520052004F0054004F004E00440041004D004500
      4E0054004F000100000000000E00000046004F0052004D00410054004F000100
      00000000180000004F004D0045005400540049005F00560055004F0054004F00
      010000000000320000005200450047004F004C0041005F00430041004C004300
      4F004C004F005F004100550054004F004D004100540049004300410001000000
      00002C0000005200450047004F004C0041005F00430041004C0043004F004C00
      4F005F004D0041004E00550041004C0045000100000000002600000052004500
      47004F004C0041005F004D004F00440049004600490043004100420049004C00
      45000100000000001000000043004F004D004D0045004E0054004F0001000000
      0000}
    Left = 186
    Top = 16
  end
  object selP430: TOracleDataSet
    SQL.Strings = (
      'SELECT COD_CONTRATTO FROM P430_ANAGRAFICO P430 '
      '  WHERE PROGRESSIVO = :Progressivo AND DECORRENZA = '
      '    (SELECT MAX(DECORRENZA) FROM P430_ANAGRAFICO'
      '     WHERE DECORRENZA <= :DataElaborazione'
      '     AND PROGRESSIVO = P430.PROGRESSIVO'
      '    )')
    Optimize = False
    Variables.Data = {
      0400000002000000180000003A00500052004F00470052004500530053004900
      56004F00030000000000000000000000220000003A0044004100540041004500
      4C00410042004F00520041005A0049004F004E0045000C000000000000000000
      0000}
    Left = 132
    Top = 14
  end
  object selP663: TOracleDataSet
    SQL.Strings = (
      
        'SELECT TO_NUMBER(VALORE,'#39'9999999999D99999'#39','#39'nls_numeric_characte' +
        'rs='#39#39',.'#39#39#39') VALORE FROM P663_FLUSSIDATIINDIVIDUALI '
      '  WHERE ID_FLUSSO = :IdFLUPER '
      '    AND PROGRESSIVO = :Progressivo '
      '    AND PARTE = :Parte'
      '    AND NUMERO = :Numero '
      '    AND PROGRESSIVO_NUMERO = :ProgressivoNumero '
      '    AND TIPO_RECORD = '#39'M'#39)
    Optimize = False
    Variables.Data = {
      0400000005000000240000003A00500052004F00470052004500530053004900
      56004F004E0055004D00450052004F0003000000000000000000000018000000
      3A00500052004F0047005200450053005300490056004F000300000000000000
      000000000C0000003A0050004100520054004500050000000000000000000000
      0E0000003A004E0055004D00450052004F000500000000000000000000001200
      00003A004900440046004C005500500045005200030000000000000000000000}
    CommitOnPost = False
    Left = 304
    Top = 18
  end
  object selP050: TOracleDataSet
    SQL.Strings = (
      'SELECT P050.VALORE,P050.TIPO'
      'FROM P050_ARROTONDAMENTI P050 WHERE'
      'P050.COD_ARROTONDAMENTO = :CodArrotondamento AND '
      'P050.COD_VALUTA = :CodValuta AND'
      
        'P050.DECORRENZA = (SELECT MAX(DECORRENZA) FROM P050_ARROTONDAMEN' +
        'TI'
      
        '   WHERE DECORRENZA <= :Decorrenza AND COD_ARROTONDAMENTO = :Cod' +
        'Arrotondamento AND '
      '   COD_VALUTA = :CodValuta)')
    Optimize = False
    Variables.Data = {
      0400000003000000160000003A004400450043004F005200520045004E005A00
      41000C0000000000000000000000240000003A0043004F004400410052005200
      4F0054004F004E00440041004D0045004E0054004F0005000000000000000000
      0000140000003A0043004F004400560041004C00550054004100050000000000
      000000000000}
    CommitOnPost = False
    Left = 18
    Top = 14
  end
  object selP150: TOracleDataSet
    SQL.Strings = (
      'SELECT COD_VALUTA_BASE FROM P150_SETUP '
      
        'WHERE DECORRENZA = (SELECT MAX(DECORRENZA) FROM P150_SETUP WHERE' +
        ' DECORRENZA <= :DATAELABORAZIONE)')
    Optimize = False
    Variables.Data = {
      0400000001000000220000003A00440041005400410045004C00410042004F00
      520041005A0049004F004E0045000C0000000000000000000000}
    OracleDictionary.DefaultValues = True
    QBEDefinition.QBEFieldDefs = {
      050000000C0000000800000041004E004E004F000100000000000A0000005000
      41005200540045000100000000000C0000004E0055004D00450052004F000100
      00000000160000004400450053004300520049005A0049004F004E0045000100
      00000000100000004E0055004D0045005200490043004F000100000000002400
      000043004F0044005F004100520052004F0054004F004E00440041004D004500
      4E0054004F000100000000000E00000046004F0052004D00410054004F000100
      00000000180000004F004D0045005400540049005F00560055004F0054004F00
      010000000000320000005200450047004F004C0041005F00430041004C004300
      4F004C004F005F004100550054004F004D004100540049004300410001000000
      00002C0000005200450047004F004C0041005F00430041004C0043004F004C00
      4F005F004D0041004E00550041004C0045000100000000002600000052004500
      47004F004C0041005F004D004F00440049004600490043004100420049004C00
      45000100000000001000000043004F004D004D0045004E0054004F0001000000
      0000}
    Left = 72
    Top = 14
  end
  object selT430: TOracleDataSet
    SQL.Strings = (
      
        'SELECT DATADECORRENZA,DATAFINE,INIZIO,FINE,:NomeDatoTipoRapp TIP' +
        'O_RAPP_LAV'
      '  FROM T430_STORICO '
      '  WHERE PROGRESSIVO = :Progressivo '
      
        '  AND TO_DATE('#39'01'#39'||TO_CHAR(:DataElaborazione,'#39'mmyyyy'#39'),'#39'ddmmyyy' +
        'y'#39') <= DATAFINE'
      '  AND :DataElaborazione + 1 >= DATADECORRENZA '
      '  ORDER BY DATADECORRENZA')
    Optimize = False
    Variables.Data = {
      0400000003000000220000003A00440041005400410045004C00410042004F00
      520041005A0049004F004E0045000C0000000000000000000000180000003A00
      500052004F0047005200450053005300490056004F0003000000000000000000
      0000220000003A004E004F004D0045004400410054004F005400490050004F00
      5200410050005000010000000000000000000000}
    QBEDefinition.QBEFieldDefs = {
      05000000010000001600000043004F004C0055004D004E005F004E0041004D00
      4500010000000000}
    Left = 16
    Top = 72
  end
  object selP663b: TOracleDataSet
    SQL.Strings = (
      'SELECT P663.*, P660.NUMERICO, P663.ROWID '
      
        '  FROM P663_FLUSSIDATIINDIVIDUALI P663, P660_FLUSSIREGOLE P660, ' +
        'P662_FLUSSITESTATE P662 '
      '  WHERE P663.ID_FLUSSO = :IdFLUPER '
      '    AND P662.ID_FLUSSO = P663.ID_FLUSSO '
      '    AND P660.NOME_FLUSSO = P662.NOME_FLUSSO'
      '    AND P663.PARTE = '#39'B'#39
      '    AND PROGRESSIVO = :Progressivo '
      '    AND P660.DECORRENZA ='
      '                       (SELECT MAX(DECORRENZA) '
      '                          FROM P660_FLUSSIREGOLE P660A '
      '                         WHERE P660A.PARTE = P660.PARTE '
      '                           AND P660A.NUMERO = P660.NUMERO '
      
        '                           AND P660A.NOME_FLUSSO = P660.NOME_FLU' +
        'SSO'
      
        '                           AND P660A.DECORRENZA <= :DataElaboraz' +
        'ione)'
      '   AND P660.PARTE = P663.PARTE '
      '   AND P660.NUMERO = P663.NUMERO ')
    Optimize = False
    Variables.Data = {
      0400000003000000180000003A00500052004F00470052004500530053004900
      56004F00030000000000000000000000120000003A004900440046004C005500
      500045005200030000000000000000000000220000003A004400410054004100
      45004C00410042004F00520041005A0049004F004E0045000C00000000000000
      00000000}
    CommitOnPost = False
    Left = 368
    Top = 18
  end
  object insP663: TOracleQuery
    SQL.Strings = (
      'INSERT INTO P663_FLUSSIDATIINDIVIDUALI'
      
        '  (ID_FLUSSO, PROGRESSIVO, PARTE, NUMERO, PROGRESSIVO_NUMERO, TI' +
        'PO_RECORD, VALORE)'
      'VALUES'
      
        '  (:IdFLUPER, :Progressivo, :Parte, :Numero, :ProgressivoNumero,' +
        ' :TipoRecord, :Valore)')
    Optimize = False
    Variables.Data = {
      04000000070000000E0000003A00560041004C004F0052004500050000000000
      0000000000000C0000003A005000410052005400450005000000000000000000
      00000E0000003A004E0055004D00450052004F00050000000000000000000000
      240000003A00500052004F0047005200450053005300490056004F004E005500
      4D00450052004F00030000000000000000000000160000003A00540049005000
      4F005200450043004F0052004400050000000000000000000000180000003A00
      500052004F0047005200450053005300490056004F0003000000000000000000
      0000120000003A004900440046004C0055005000450052000300000000000000
      00000000}
    Left = 74
    Top = 134
  end
  object updP663: TOracleQuery
    SQL.Strings = (
      'UPDATE P663_FLUSSIDATIINDIVIDUALI SET PROGRESSIVO_NUMERO = 2'
      '  WHERE ID_FLUSSO = :IdFLUPER '
      '  AND PROGRESSIVO = :Progressivo'
      '  AND PARTE = :Parte'
      '  AND PROGRESSIVO_NUMERO = 1')
    Optimize = False
    Variables.Data = {
      0400000003000000180000003A00500052004F00470052004500530053004900
      56004F00030000000000000000000000120000003A004900440046004C005500
      5000450052000300000000000000000000000C0000003A005000410052005400
      4500050000000000000000000000}
    Left = 194
    Top = 134
  end
  object updP663a: TOracleQuery
    SQL.Strings = (
      
        'UPDATE P663_FLUSSIDATIINDIVIDUALI SET VALORE = TO_CHAR(PROGRESSI' +
        'VO_NUMERO)'
      '  WHERE ID_FLUSSO = :IdFLUPER '
      '  AND PROGRESSIVO = :Progressivo'
      '  AND PARTE = :Parte'
      '  AND NUMERO = :Numero'
      '  AND PROGRESSIVO_NUMERO > 1')
    Optimize = False
    Variables.Data = {
      0400000004000000180000003A00500052004F00470052004500530053004900
      56004F00030000000000000000000000120000003A004900440046004C005500
      5000450052000300000000000000000000000C0000003A005000410052005400
      45000500000000000000000000000E0000003A004E0055004D00450052004F00
      050000000000000000000000}
    Left = 253
    Top = 134
  end
end
