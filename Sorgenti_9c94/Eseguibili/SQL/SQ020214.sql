ALTER TABLE SG101_FAMILIARI ADD DETR_FIGLIO_HANDICAP VARCHAR2(1) DEFAULT 'N' ;
ALTER TABLE I010_CAMPIANAGRAFICI MODIFY NOME_CAMPO VARCHAR2(40);
ALTER TABLE I010_CAMPIANAGRAFICI MODIFY NOME_LOGICO VARCHAR2(40);

CREATE OR REPLACE VIEW V010_CALENDARI AS
  SELECT T430.PROGRESSIVO,T011.DATA,T011.FESTIVO,T011.LAVORATIVO,T011.NUMGIORNI
  FROM T011_CALENDARI T011,T430_STORICO T430 
  WHERE 
  CODICE = CALENDARIO AND
  DATA BETWEEN DATADECORRENZA AND DATAFINE AND
  NOT EXISTS (SELECT 'X' FROM T012_CALENDINDIVID 
              WHERE
              PROGRESSIVO = T430.PROGRESSIVO AND DATA = T011.DATA)
  UNION ALL
  SELECT T012.PROGRESSIVO,T012.DATA,T012.FESTIVO,T012.LAVORATIVO, T012.NUMGIORNI 
  FROM T012_CALENDINDIVID T012;
  
ALTER TABLE T670_REGOLEBUONI ADD PAUSA_MENSA VARCHAR2(1) DEFAULT 'S';  
ALTER TABLE T670_REGOLEBUONI ADD ACCESSI_MENSA VARCHAR2(1) DEFAULT 'S';
ALTER TABLE T670_REGOLEBUONI ADD ACQUISTO_MINIMO NUMBER(2) DEFAULT 0;
ALTER TABLE T670_REGOLEBUONI ADD RESTITUZIONE_MAX NUMBER(3) DEFAULT 0;
UPDATE T670_REGOLEBUONI SET RESTITUZIONE_MAX = CONGUAGLIO_MAX;

INSERT INTO T001_PARAMETRIFUNZIONI 
  (PROG,NOME,VALORE,PROGOPERATORE)
SELECT PROG,'MATURAZPROG','N',PROGOPERATORE FROM T001_PARAMETRIFUNZIONI
WHERE PROG = 'A041' AND NOME = 'MATURAZIONE' AND VALORE = '0';

INSERT INTO T001_PARAMETRIFUNZIONI 
  (PROG,NOME,VALORE,PROGOPERATORE)
SELECT PROG,'MATURAZPROG','S',PROGOPERATORE FROM T001_PARAMETRIFUNZIONI
WHERE PROG = 'A041' AND NOME = 'MATURAZIONE' AND VALORE = '1';

ALTER TABLE T020_ORARI ADD MIN_USCITA_NOTTE VARCHAR2(5) DEFAULT '00.00';
ALTER TABLE T220_PROFILIORARI ADD RITARDO_ENTRATA NUMBER(3) DEFAULT -1;

CREATE TABLE T482_REGIONI (
  COD_REGIONE VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40) NOT NULL,
  CONSTRAINT T482_PK PRIMARY KEY (COD_REGIONE)
  USING INDEX STORAGE (pctincrease 0 initial 128K next 64K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 128K next 64K)
TABLESPACE LAVORO pctfree 10 pctused 80;

CREATE TABLE T481_PROVINCE (
  COD_PROVINCIA VARCHAR2(2),
  DESCRIZIONE VARCHAR2(40) NOT NULL,
  COD_REGIONE VARCHAR2(5) NOT NULL,
  CONSTRAINT T481_PK PRIMARY KEY (COD_PROVINCIA)
  USING INDEX STORAGE (pctincrease 0 initial 256K next 64K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 256K next 64K)
TABLESPACE LAVORO pctfree 10 pctused 80;

ALTER TABLE T481_PROVINCE ADD CONSTRAINT T481_FK_T482
  FOREIGN KEY (COD_REGIONE) REFERENCES T482_REGIONI;
