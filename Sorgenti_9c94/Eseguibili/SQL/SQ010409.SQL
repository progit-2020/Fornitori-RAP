CREATE INDEX I001_ID ON I001_LOGDATI (ID)
  TABLESPACE INDICI STORAGE(PCTINCREASE 0 INITIAL 1M NEXT 1M);
  
-- Create table 
create table T190_INTERFACCIAPAGHE
(
  CODICE varchar2(20),
  CODINTERNO varchar2(4),
  ORDINE NUMBER(3),
  FLAG varchar2(1),
  VOCE_PAGHE varchar2(6),
  UM varchar2(4)
)
  tablespace LAVORO
  pctfree 10
  pctused 70
  storage
  (
    initial 256K
    next 256K
    minextents 1
    pctincrease 0
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table T190_INTERFACCIAPAGHE
  add constraint T190_PK primary key (codice,codinterno)
  using index 
  tablespace INDICI
  pctfree 10
  storage
  (
    initial 256K
    next 256K
    minextents 1
    pctincrease 0
  );

INSERT INTO T190_INTERFACCIAPAGHE (CODICE,CODINTERNO,FLAG,VOCE_PAGHE)
SELECT CODICE,'010',F010,P010 FROM T190_INTPAGHE UNION
SELECT CODICE,'020',F020,P020 FROM T190_INTPAGHE UNION
SELECT CODICE,'030',F030,P030 FROM T190_INTPAGHE UNION
SELECT CODICE,'040',F040,NULL FROM T190_INTPAGHE UNION
SELECT CODICE,'060',F060,P060 FROM T190_INTPAGHE UNION
SELECT CODICE,'080',F080,P080 FROM T190_INTPAGHE UNION
SELECT CODICE,'090',F090,P090 FROM T190_INTPAGHE UNION
SELECT CODICE,'100',F100,P100 FROM T190_INTPAGHE UNION
SELECT CODICE,'110',F110,P110 FROM T190_INTPAGHE UNION
SELECT CODICE,'120',F120,P120 FROM T190_INTPAGHE UNION
SELECT CODICE,'130',F130,P130 FROM T190_INTPAGHE UNION
SELECT CODICE,'140',F140,P140 FROM T190_INTPAGHE UNION
SELECT CODICE,'150',F150,P150 FROM T190_INTPAGHE UNION
SELECT CODICE,'160',F160,P160 FROM T190_INTPAGHE UNION
SELECT CODICE,'170',F170,P170 FROM T190_INTPAGHE UNION
SELECT CODICE,'180',F180,P180 FROM T190_INTPAGHE UNION
SELECT CODICE,'200',F200,P200 FROM T190_INTPAGHE UNION
SELECT CODICE,'210',F210,P210 FROM T190_INTPAGHE UNION
SELECT CODICE,'215',F215,P215 FROM T190_INTPAGHE UNION
SELECT CODICE,'220',F220,P220 FROM T190_INTPAGHE UNION
SELECT CODICE,'225',F225,P225 FROM T190_INTPAGHE UNION
SELECT CODICE,'230',F230,P230 FROM T190_INTPAGHE UNION
SELECT CODICE,'240',F240,P240 FROM T190_INTPAGHE UNION
SELECT CODICE,'250',F250,NULL FROM T190_INTPAGHE UNION
SELECT CODICE,'260',F260,P260 FROM T190_INTPAGHE UNION
SELECT CODICE,'270',F270,P270 FROM T190_INTPAGHE UNION
SELECT CODICE,'280',F280,P280 FROM T190_INTPAGHE UNION
SELECT CODICE,'290',F290,P290 FROM T190_INTPAGHE UNION
SELECT CODICE,'300',F300,P300 FROM T190_INTPAGHE UNION
SELECT CODICE,'310',F310,P310 FROM T190_INTPAGHE UNION
SELECT CODICE,'320',F320,P320 FROM T190_INTPAGHE UNION
SELECT CODICE,'330',F330,P330 FROM T190_INTPAGHE;

create table M010_PARAMETRICONTEGGIO
(
  DECORRENZA DATE not null,
  DESCRIZIONE VARCHAR2(40),
  OREMINIMEPERINDENNITA VARCHAR2(5),
  LIMITEORERETRIBUITEINTERE VARCHAR2(5),
  ARROTONDAMENTOORE NUMBER,
  PERCRETRIBSUPEROORE NUMBER,
  MAXGIORNIRETRMESE NUMBER,
  PERCRETRIBSUPEROGG NUMBER,
  ARROTTARIFFADOPORIDUZIONE VARCHAR2(5),
  ARROTTOTIMPORTIDATIPAGHE VARCHAR2(5),
  INDENNITAKMNELCOMUNE NUMBER,
  ARROTIMPORTIKMNELCOMUNE VARCHAR2(5),
  INDENNITAKMFUORICOMUNE NUMBER,
  ARROTIMPORTIKMFUORICOMUNE VARCHAR2(5)
)
  tablespace LAVORO
  pctfree 10
  pctused 70
  initrans 1
  maxtrans 255
  storage
  (
    initial 16K
    next 128K
    minextents 1
    pctincrease 0
  );
-- Add comments to the columns 
comment on column M010_PARAMETRICONTEGGIO.DECORRENZA
  is 'Data di decorrenza del parametro';
comment on column M010_PARAMETRICONTEGGIO.DESCRIZIONE
  is 'Descrizione Parametro';
comment on column M010_PARAMETRICONTEGGIO.OREMINIMEPERINDENNITA
  is 'Numero HH.MM minimo di ore per indennità';
comment on column M010_PARAMETRICONTEGGIO.LIMITEORERETRIBUITEINTERE
  is 'Numero HH.MM ore retibuite intere';
comment on column M010_PARAMETRICONTEGGIO.ARROTONDAMENTOORE
  is 'Minuti di arrotondamento';
comment on column M010_PARAMETRICONTEGGIO.PERCRETRIBSUPEROORE
  is 'Percentuale di retribuzione in caso di supero delle ore';
comment on column M010_PARAMETRICONTEGGIO.MAXGIORNIRETRMESE
  is 'Numero max di giorni da retribuire nel mese';
comment on column M010_PARAMETRICONTEGGIO.PERCRETRIBSUPEROGG
  is 'Percentuale di retribuzione in caso di supero dei giorni';
comment on column M010_PARAMETRICONTEGGIO.ARROTTARIFFADOPORIDUZIONE
  is 'Arrotondamento della tariffa dopo la riduzione';
comment on column M010_PARAMETRICONTEGGIO.ARROTTOTIMPORTIDATIPAGHE
  is 'Arrotondamento totale importi dati paghe';
comment on column M010_PARAMETRICONTEGGIO.INDENNITAKMNELCOMUNE
  is 'Importo dell''indennità km all''interno del comune';
comment on column M010_PARAMETRICONTEGGIO.ARROTIMPORTIKMNELCOMUNE
  is 'Arrotondamento importo km nel comune';
comment on column M010_PARAMETRICONTEGGIO.INDENNITAKMFUORICOMUNE
  is 'Importo dell''indennità km fuori dal comunr';
comment on column M010_PARAMETRICONTEGGIO.ARROTIMPORTIKMFUORICOMUNE
  is 'Arrotondamento importo km fuori comune';
-- Create/Recreate primary, unique and foreign key constraints 
alter table M010_PARAMETRICONTEGGIO
  add constraint M010_PK primary key (DECORRENZA)
  using index 
  tablespace INDICI
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 16K
    next 128K
    minextents 1
    pctincrease 0
  );

create table M020_TIPIRIMBORSI
(
  CODICE VARCHAR2(5) not null,
  DESCRIZIONE VARCHAR2(40),
  CODICEVOCEPAGHE VARCHAR2(6),
  SCARICOPAGHE VARCHAR2(1) default 'N' not null,
  ESISTENZAINDENNITASUPPL VARCHAR2(1) default 'N' not null,
  CODICEVOCEPAGHEINDENNITASUPPL VARCHAR2(6),
  SCARICOPAGHEINDENNITASUPPL VARCHAR2(1) default 'N' not null,
  PERCINDENNITASUPPL NUMBER,
  ARROTINDENNITASUPPL VARCHAR2(5)
)
  tablespace LAVORO
  pctfree 10
  pctused 40
  initrans 1
  maxtrans 255
  storage
  (
    initial 16K
    next 128K
    minextents 1
    pctincrease 0
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table M020_TIPIRIMBORSI
  add constraint M020_PK primary key (CODICE)
  using index 
  tablespace INDICI
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 16K
    next 128K
    minextents 1
    pctincrease 0
  );

create table M030_TARIFFAORARIA
(
  CODICE VARCHAR2(80) not null,
  DECORRENZA DATE not null,
  DESCRIZIONE VARCHAR2(40),
  TARIFFAORARIAINDTRASFERTA NUMBER
)
  tablespace LAVORO
  pctfree 10
  pctused 70
  initrans 1
  maxtrans 255
  storage
  (
    initial 16K
    next 128K
    minextents 1
    pctincrease 0
  );
-- Add comments to the columns 
comment on column M030_TARIFFAORARIA.CODICE
  is 'Codice tipo rimborso';
comment on column M030_TARIFFAORARIA.DECORRENZA
  is 'Decorrenza Tipo Rimborso';
comment on column M030_TARIFFAORARIA.DESCRIZIONE
  is 'Descrizione Tipo Rimborso';
comment on column M030_TARIFFAORARIA.TARIFFAORARIAINDTRASFERTA
  is 'Tariffa oraria indennità di trasferta';
-- Create/Recreate primary, unique and foreign key constraints 
alter table M030_TARIFFAORARIA
  add constraint M030_PK primary key (CODICE,DECORRENZA)
  using index 
  tablespace INDICI
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 16K
    next 128K
    minextents 1
    pctincrease 0
  );

create table M040_MISSIONI
(
  PROGRESSIVO NUMBER not null,
  MESESCARICO DATE not null,
  MESECOMPETENZA DATE not null,
  DATADA DATE not null,
  ORADA VARCHAR2(5) not null,
  PROTOCOLLO VARCHAR2(10),
  TIPOREGISTRAZIONE VARCHAR2(1) default 'M' not null,
  DATAA DATE,
  ORAA VARCHAR2(5),
  TOTALEGG NUMBER,
  DURATA VARCHAR2(7),
  TARIFFAINDINTERA NUMBER,
  OREINDINTERA NUMBER,
  IMPORTOINDINTERA NUMBER,
  TARIFFAINDRIDOTTAH NUMBER,
  OREINDRIDOTTAH NUMBER,
  IMPORTOINDRIDOTTAH NUMBER,
  TARIFFAINDRIDOTTAG NUMBER,
  OREINDRIDOTTAG NUMBER,
  IMPORTOINDRIDOTTAG NUMBER,
  TARIFFAINDRIDOTTAHG NUMBER,
  OREINDRIDOTTAHG NUMBER,
  IMPORTOINDRIDOTTAHG NUMBER,
  TARIFFAINDKMNELCOMUNE NUMBER,
  KMPERCORSINELCOMUNE NUMBER,
  IMPORTOINDKMNELCOMUNE NUMBER,
  TARIFFAINDKMFUORICOMUNE NUMBER,
  KMPERCORSIFUORICOMUNE NUMBER,
  IMPORTOINDKMFUORICOMUNE NUMBER,
  FLAG_MODIFICATO VARCHAR2(1)
)
  tablespace LAVORO
  pctfree 10
  pctused 40
  initrans 1
  maxtrans 255
  storage
  (
    initial 16K
    next 256K
    minextents 1
    pctincrease 0
  );

-- Create/Recreate primary, unique and foreign key constraints 
alter table M040_MISSIONI
  add constraint M040_PK primary key (PROGRESSIVO,MESESCARICO,MESECOMPETENZA,DATADA,ORADA)
  using index 
  tablespace INDICI
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 16K
    next 256K
    minextents 1
    pctincrease 0
  );

create table M050_RIMBORSI
(
  PROGRESSIVO NUMBER not null,
  MESESCARICO DATE not null,
  MESECOMPETENZA DATE not null,
  DATADA DATE not null,
  ORADA VARCHAR2(5) not null,
  CODICERIMBORSOSPESE VARCHAR2(5) not null,
  IMPORTORIMBORSOSPESE NUMBER,
  IMPORTOINDENNITASUPPLEMENTARE NUMBER
)
  tablespace LAVORO
  pctfree 10
  pctused 40
  initrans 1
  maxtrans 255
  storage
  (
    initial 16K
    next 256K
    minextents 1
    pctincrease 0
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table M050_RIMBORSI
  add constraint SYS_C009169 primary key (PROGRESSIVO,MESESCARICO,MESECOMPETENZA,DATADA,ORADA,CODICERIMBORSOSPESE)
  using index 
  tablespace INDICI
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 16K
    next 256K
    minextents 1
    pctincrease 0
  );
-- Create/Recreate indexes 
create index FK050 on M050_RIMBORSI (MESESCARICO,MESECOMPETENZA,DATADA,ORADA)
  tablespace LAVORO
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 16K
    next 256K
    minextents 1
    pctincrease 0
  );


/*
Valute
Integrità referenziali:
*/
CREATE TABLE P030_VALUTE (
  COD_VALUTA VARCHAR2(10),
  DECORRENZA DATE,
  DESCRIZIONE VARCHAR2(20),
  ABBREVIAZIONE VARCHAR2(3),
  NUM_DEC_IMP_VOCE NUMBER(1) DEFAULT 0,
  NUM_DEC_IMP_UNIT NUMBER(1) DEFAULT 0,
  CONSTRAINT P030_PK PRIMARY KEY (COD_VALUTA, DECORRENZA)
  USING INDEX STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE INDICI
)
STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE LAVORO;

COMMENT ON COLUMN P030_VALUTE.ABBREVIAZIONE IS
  'Abbreviazione in stampa';
COMMENT ON COLUMN P030_VALUTE.NUM_DEC_IMP_VOCE IS
  'Numero dei decimali minimi dei campi importo voce';
COMMENT ON COLUMN P030_VALUTE.NUM_DEC_IMP_UNIT IS
  'Numero dei decimali minimi dei campi importo unitario';

/*
Arrotondamenti
Integrità referenziali: 
*/
CREATE TABLE P050_ARROTONDAMENTI (
  COD_ARROTONDAMENTO VARCHAR2(5),
  COD_VALUTA VARCHAR2(10),
  DECORRENZA DATE,
  DESCRIZIONE VARCHAR2(40),
  VALORE NUMBER DEFAULT 1,
  TIPO VARCHAR2(1) DEFAULT 'P',
  CONSTRAINT P050_PK PRIMARY KEY (COD_ARROTONDAMENTO,COD_VALUTA,DECORRENZA)
  USING INDEX STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE INDICI
)
STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE LAVORO;

COMMENT ON COLUMN P050_ARROTONDAMENTI.TIPO IS
  'Tipo arrotondamento: E=Eccesso D=Difetto P=Puro';

CREATE TABLE P050_KARROTONDAMENTI (
  COD_ARROTONDAMENTO VARCHAR2(5),
  CONSTRAINT P050_KPK PRIMARY KEY (COD_ARROTONDAMENTO)
  USING INDEX STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE INDICI
)
STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE LAVORO;


/*
Tipo di pagamento Es.:A MEZZO CONTO CORRENTE BANCARIO
Integrità referenziali:
*/
CREATE TABLE P130_PAGAMENTI (
  COD_PAGAMENTO VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  CONSTRAINT P130_PK PRIMARY KEY (COD_PAGAMENTO)
  USING INDEX STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE INDICI
)
STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE LAVORO;

/*
Dati di setup
Integrità referenziali: P130_PAGAMENTI
*/
CREATE TABLE P150_SETUP (
  DECORRENZA DATE,
  COD_PAGAMENTO VARCHAR2(5),
  COD_VALUTA_BASE VARCHAR2(10),
  COD_VALUTA_STAMPA VARCHAR2(10),
  NUM_DEC_PERC NUMBER(1) DEFAULT 2,
  BLOCCO_DETR_IRPEF VARCHAR2(1) DEFAULT 'N',
  NUM_DEC_QUANTITA NUMBER(1) DEFAULT 2,
  TIPO_ORE VARCHAR2(2),
  CONSTRAINT P150_PK PRIMARY KEY (DECORRENZA)
  USING INDEX STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE INDICI
)
STORAGE (PCTINCREASE 0 INITIAL 16K NEXT 64K) TABLESPACE LAVORO;

COMMENT ON COLUMN P150_SETUP.COD_PAGAMENTO IS
  'Tipo pagamento del cedolino';
COMMENT ON COLUMN P150_SETUP.COD_VALUTA_BASE IS
  'Valuta di riferimento utilizzata per gli inserimenti e per i calcoli';
COMMENT ON COLUMN P150_SETUP.COD_VALUTA_STAMPA IS
  'Valuta del netto del cedolino';
COMMENT ON COLUMN P150_SETUP.NUM_DEC_PERC IS
  'Numero dei decimali dei campi percentuale';
COMMENT ON COLUMN P150_SETUP.BLOCCO_DETR_IRPEF IS
  'Blocco detrazioni IRPEF al valore dell''imposta del cedolino';
COMMENT ON COLUMN P150_SETUP.NUM_DEC_QUANTITA IS
  'Numero dei decimali del campo quantita'' su cedolino';
COMMENT ON COLUMN P150_SETUP.TIPO_ORE IS
  'Tipo ore: OC=Ore in Centesimi, OS=Ore in Sessantesimi';

ALTER TABLE P150_SETUP ADD CONSTRAINT P150_FK_P130
  FOREIGN KEY (COD_PAGAMENTO) REFERENCES P130_PAGAMENTI;
