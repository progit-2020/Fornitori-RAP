CREATE OR REPLACE TRIGGER P200_AFTERDEL
AFTER DELETE ON P200_VOCI
DECLARE
BEGIN
  DELETE FROM P201_ASSOGGETTAMENTI
  WHERE COD_CONTRATTO||COD_VOCE_PADRE||COD_VOCE_SPECIALE_PADRE NOT IN
  (SELECT COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE FROM P200_VOCI);
  DELETE FROM P201_ASSOGGETTAMENTI
  WHERE COD_CONTRATTO||COD_VOCE_FIGLIO||COD_VOCE_SPECIALE_FIGLIO NOT IN
  (SELECT COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE FROM P200_VOCI);
  DELETE FROM P205_QUOTE
  WHERE COD_CONTRATTO||COD_VOCE_DA_QUOTARE||COD_VOCE_SPECIALE_DA_QUOTARE NOT IN
  (SELECT COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE FROM P200_VOCI);
  DELETE FROM P205_QUOTE
  WHERE COD_CONTRATTO||COD_VOCE_IN_QUOTA||COD_VOCE_SPECIALE_IN_QUOTA NOT IN
  (SELECT COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE FROM P200_VOCI);
  DELETE FROM P216_ACCORPAMENTOVOCI
  WHERE COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE NOT IN
  (SELECT COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE FROM P200_VOCI);
  DELETE FROM P232_SCAGLIONI
  WHERE COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE NOT IN
  (SELECT COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE FROM P200_VOCI);
  DELETE FROM P230_MINIMALI
  WHERE COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE NOT IN
  (SELECT COD_CONTRATTO||COD_VOCE||COD_VOCE_SPECIALE FROM P200_VOCI);
END;
/
