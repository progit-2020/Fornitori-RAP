/*
Nazionalità
*/
CREATE TABLE P120_NAZIONALITA (
  COD_NAZIONALITA VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  CONSTRAINT P120_PK PRIMARY KEY (COD_NAZIONALITA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

/*
Nazionalità Estere
*/
CREATE TABLE P121_NAZIONALITAESTERE (
  COD_NAZIONALITAESTERE VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  CONSTRAINT P121_PK PRIMARY KEY (COD_NAZIONALITAESTERE)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

/*
Tipo di pagamenti Es.:A MEZZO CONTO CORRENTE BANCARIO
*/
CREATE TABLE P130_PAGAMENTI (
  COD_PAGAMENTO VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  CONSTRAINT P130_PK PRIMARY KEY (COD_PAGAMENTO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

/*
Dati di setup
Integrità referenziali: P130_PAGAMENTI
*/
CREATE TABLE P150_SETUP (
  DECORRENZA DATE,
  COD_PAGAMENTO VARCHAR2(5),
  COD_VALUTA_BASE VARCHAR2(10),
  COD_VALUTA_STAMPA VARCHAR2(10),
  NUM_DEC_PERC NUMBER(1) DEFAULT 2,
  BLOCCO_DETR_IRPEF VARCHAR2(1) DEFAULT 'N',
  NUM_DEC_QUANTITA NUMBER(1) DEFAULT 2,
  TIPO_ORE VARCHAR2(2),
  COD_COMUNE_INAIL VARCHAR2(4),
  CONSTRAINT P150_PK PRIMARY KEY (DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P150_SETUP.COD_PAGAMENTO IS
  'Tipo pagamento del cedolino';
COMMENT ON COLUMN P150_SETUP.COD_VALUTA_BASE IS
  'Valuta di riferimento utilizzata per gli inserimenti e per i calcoli';
COMMENT ON COLUMN P150_SETUP.COD_VALUTA_STAMPA IS
  'Valuta del netto del cedolino';
COMMENT ON COLUMN P150_SETUP.NUM_DEC_PERC IS
  'Numero dei decimali dei campi percentuale';
COMMENT ON COLUMN P150_SETUP.BLOCCO_DETR_IRPEF IS
  'Blocco detrazioni IRPEF al valore dell''imposta del cedolino';
COMMENT ON COLUMN P150_SETUP.NUM_DEC_QUANTITA IS
  'Numero dei decimali del campo quantita'' su cedolino';
COMMENT ON COLUMN P150_SETUP.TIPO_ORE IS
  'Tipo ore: OC=Ore in Centesimi, OS=Ore in Sessantesimi';
COMMENT ON COLUMN P150_SETUP.COD_COMUNE_INAIL IS
  'Codice comune INAIL sede di lavoro principale';

ALTER TABLE P150_SETUP ADD CONSTRAINT P150_FK_P130
  FOREIGN KEY (COD_PAGAMENTO) REFERENCES P130_PAGAMENTI;

/*
Parametrizzazione file con voci variabili in input
*/
CREATE TABLE P191_PARFILEVOCIINPUT (
  COD_PARFILE VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  TIPOFILE VARCHAR2(1),
  NOMEFILE VARCHAR2(50),
  FORMATONOMEFILE VARCHAR2(10),
  FORMATOORE VARCHAR2(2),
  CONSTRAINT P191_PK PRIMARY KEY (COD_PARFILE)
    USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
    TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P191_PARFILEVOCIINPUT.COD_PARFILE IS
  'Codice del tipo di parametrizzazione';
COMMENT ON COLUMN P191_PARFILEVOCIINPUT.TIPOFILE IS
  'Tipo del file in input: F=formato testo, T=tabella oracle';
COMMENT ON COLUMN P191_PARFILEVOCIINPUT.NOMEFILE IS
  'Nome del file o tabella oracle (puo'' essere anche un sinonimo) in input';
COMMENT ON COLUMN P191_PARFILEVOCIINPUT.FORMATONOMEFILE IS
  'Formato dell''eventuale data contenuta nel nome del file (es.:PAGHE042002 formato = mmyyyy)';
COMMENT ON COLUMN P191_PARFILEVOCIINPUT.FORMATOORE IS
  'Formato delle quantita'' in ore: OC=ore e minuti in centesimi, OS=ore e minuti in sessantesimi, MI=valore in minuti assoluti';

/*
Parametrizzazione dati del file con voci variabili in input
Integrità referenziali: P191_PARFILEVOCIINPUT
*/
CREATE TABLE P192_PARDATIVOCIINPUT (
  COD_PARFILE VARCHAR2(5),
  COD_DATO VARCHAR2(2),
  NOME_COLONNA VARCHAR2(20),
  POSIZIONE NUMBER,
  LUNGHEZZA NUMBER,
  VALORE_DEFAULT VARCHAR2(80),
  FORMATO VARCHAR2(80),
  CONSTRAINT P192_PK PRIMARY KEY (COD_PARFILE,COD_DATO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P192_PARDATIVOCIINPUT.COD_PARFILE IS
  'Codice del tipo di parametrizzazione';
COMMENT ON COLUMN P192_PARDATIVOCIINPUT.COD_DATO IS
  'Codice che identifica il tipo di dato descritto (es.:VO=Codice voce, QU=Quantita'',..)';
COMMENT ON COLUMN P192_PARDATIVOCIINPUT.NOME_COLONNA IS
  'Nome della colonna che contiene il dato. Valido solo se si tratta di tabella oracle';
COMMENT ON COLUMN P192_PARDATIVOCIINPUT.POSIZIONE IS
  'Posizione del dato all''interno del file. Usato solo se si tratta di file testo';
COMMENT ON COLUMN P192_PARDATIVOCIINPUT.LUNGHEZZA IS
  'Lunghezza del dato all''interno del file. Usato solo se si tratta di file testo';
COMMENT ON COLUMN P192_PARDATIVOCIINPUT.VALORE_DEFAULT IS
  'Valore di default da assegnare al dato nel caso in cui questi non fosse valorizzato';
COMMENT ON COLUMN P192_PARDATIVOCIINPUT.FORMATO IS
  'Da utilizzarsi per definire particolari formati per alcuni tipi di dati in particolare per le date';

ALTER TABLE P192_PARDATIVOCIINPUT ADD CONSTRAINT P192_FK_P191
  FOREIGN KEY (COD_PARFILE) REFERENCES P191_PARFILEVOCIINPUT(COD_PARFILE)
  ON DELETE CASCADE;

/*
Voci variabili in input da file esterno
*/
CREATE TABLE P193_VOCIVARIABILIINPUT (
  MATRICOLA VARCHAR2(8) NOT NULL,
  COD_VOCE VARCHAR2(5) NOT NULL,
  COD_VOCE_SPECIALE VARCHAR2(5) NOT NULL,
  DATA_CEDOLINO DATE NOT NULL,
  PROGR_DATA_CEDOLINO NUMBER NOT NULL,
  QUANTITA NUMBER,
  IMPORTO NUMBER,
  DATA_COMPETENZA_DA DATE,
  DATA_COMPETENZA_A DATE,
  STATO VARCHAR2(2) DEFAULT 'PA' NOT NULL,
  CONSTRAINT P193_PK PRIMARY KEY (MATRICOLA,COD_VOCE,COD_VOCE_SPECIALE,DATA_CEDOLINO,PROGR_DATA_CEDOLINO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 10M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 10M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P193_VOCIVARIABILIINPUT.PROGR_DATA_CEDOLINO IS
  'Progressivo per differenziare eventuali ripetizioni di scarichi per lo stesso mese di cedolino';
COMMENT ON COLUMN P193_VOCIVARIABILIINPUT.QUANTITA IS
  'Contiene la quantita'' della voce in input. Contiene anche gli importi se non esiste il campo specifico';
COMMENT ON COLUMN P193_VOCIVARIABILIINPUT.IMPORTO IS
  'Contiene l''importo totale della voce in input';
COMMENT ON COLUMN P193_VOCIVARIABILIINPUT.DATA_COMPETENZA_DA IS
  'Inizio periodo di competenza per la voce';
COMMENT ON COLUMN P193_VOCIVARIABILIINPUT.DATA_COMPETENZA_A IS
  'Fine periodo di competenza per la voce';
COMMENT ON COLUMN P193_VOCIVARIABILIINPUT.STATO IS
  'Stato del dato: PA=Prima acquisizione, AD=Acquisizione definitiva, SC=Scartato, SN=Sequenza non rispettata';

/*
Raggruppamento voci
Integrità referenziali:
*/
CREATE TABLE P198_RAGGRUPPAMENTOVOCI (
  COD_RAGGRUPPAMENTO VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  CONSTRAINT P198_PK PRIMARY KEY (COD_RAGGRUPPAMENTO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K) 
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

/*
Voci stipendiali
Integrità referenziali: P070_MISUREQUANTITA, P080_CAUSALIIRPEF, P198_RAGGRUPPAMENTOVOCI,
                        P204_VOCIOPERAZIONI
*/
CREATE TABLE P200_VOCI (
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  DECORRENZA DATE,
  ID_VOCE NUMBER,
  DESCRIZIONE VARCHAR2(40) NOT NULL,
  COD_VOCE_STAMPA VARCHAR2(10),
  DESCRIZIONE_STAMPA VARCHAR2(40),
  PROTETTA VARCHAR2(1) DEFAULT 'N',
  TIPO VARCHAR2(2) DEFAULT 'AL',
  RID_MESE_ASS_CESS VARCHAR2(1) DEFAULT 'N',
  CASSA_COMPETENZA VARCHAR2(2) DEFAULT 'CM',
  VOCE_IMPORTO VARCHAR2(1) DEFAULT 'S',
  IMPORTO_AUTOMATICO VARCHAR2(1) DEFAULT 'S',
  IMPORTO_AUTOMATICO_TIPO VARCHAR2(1) DEFAULT 'T',
  IMPORTO NUMBER DEFAULT 0,
  IMPORTO_COLONNA VARCHAR2(1) DEFAULT 'D',
  VOCE_QUANTITA VARCHAR2(1) DEFAULT 'N',
  COD_MISURAQUANTITA VARCHAR2(5),
  RITENUTA_MASSIMALI_SCAGLIONI VARCHAR2(1) DEFAULT 'N',
  RITENUTA_PERC NUMBER DEFAULT 0,
  IMPONIBILE_MINIMALI VARCHAR2(1) DEFAULT 'N',
  COD_ARROTONDAMENTO VARCHAR2(5),
  PERC_MATURA13A NUMBER DEFAULT 0,
  MOSTRA_VIDEO VARCHAR2(1) DEFAULT 'S',
  CONFRONTO_MENSILE VARCHAR2(1) DEFAULT 'S',
  STAMPA_CEDOLINO VARCHAR2(1) DEFAULT 'S',
  STAMPA_COMPETENZA VARCHAR2(1) DEFAULT 'S',
  STAMPA_COMPETENZA_QUOTE VARCHAR2(1) DEFAULT 'N',
  COD_CAUSALEIRPEF VARCHAR2(10),
  RIDOTTA_PARTTIME_VERT VARCHAR2(1) DEFAULT 'N',
  RIDOTTA_PARTTIME_ORIZZ VARCHAR2(1) DEFAULT 'N',
  NO_CEDOLINO_NORMALE VARCHAR2(1) DEFAULT 'N',
  FORZA_GGCALCOLO_QUOTE VARCHAR2(1) DEFAULT 'S',
  ABBATTE_GGMINIMALI VARCHAR2(1) DEFAULT 'N',
  ABBATTE_GGDETRAZ_CARICOFAM VARCHAR2(1) DEFAULT 'N',
  ABBATTE_GGDETRAZ_LAVDIP VARCHAR2(1) DEFAULT 'N',
  ABBATTE_GGANF VARCHAR2(1) DEFAULT 'N',
  CUMULO_ANNUALE_CEDOLONE VARCHAR2(2) DEFAULT 'NS',
  COD_RAGGRUPPAMENTO VARCHAR2(5),
  PERC_ABBATTE13A NUMBER DEFAULT '0',
  NOTE LONG,
  CUMULO_IN_CALCOLO VARCHAR2(1) DEFAULT 'M' NOT NULL,
  COD_VOCE_LINK_ASSOG VARCHAR2(5),
  COD_VOCE_SPECIALE_LINK_ASSOG VARCHAR2(5),
  DIVISORE_QUOTE NUMBER(5,2),
  ABBATTE_GGINP VARCHAR2(1) DEFAULT 'N' NOT NULL,
  ABBATTE_GGINA VARCHAR2(1) DEFAULT 'N' NOT NULL,
  PROGRAMMATA VARCHAR2(1) DEFAULT 'N',
  ONERI_DETRAZIONI VARCHAR2(1) DEFAULT 'N',
  ECCEZIONI_SENSIBILI VARCHAR2(10),
  CONSTRAINT P200_PK PRIMARY KEY (COD_CONTRATTO,COD_VOCE,COD_VOCE_SPECIALE,DECORRENZA)
    USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
    TABLESPACE INDICI pctfree 10,
  CONSTRAINT P200_UQ_ID_VOCE UNIQUE (ID_VOCE)
    USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
    TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P200_VOCI.ID_VOCE IS
  'Valorizzato dalla sequenza P200_ID_VOCE identifica: Contratto+CodiceVoce+CodiceVoceSpeciale+Decorrenza';
COMMENT ON COLUMN P200_VOCI.COD_VOCE_STAMPA IS
  'Codice voce in stampa: sempre variabile dall''operatore';
COMMENT ON COLUMN P200_VOCI.DESCRIZIONE_STAMPA IS
  'Descrizione voce in stampa: sempre variabile dall''operatore';
COMMENT ON COLUMN P200_VOCI.PROTETTA IS
  'Bloccata per l''operatore (S/N)';
COMMENT ON COLUMN P200_VOCI.TIPO IS
  'Tipo voce: RB=Retribuzione base, IM=Imponibile, RI=Ritenuta su imponibile, RA=Riduzione per assenza, AS=Assenza, AL=Altro';
COMMENT ON COLUMN P200_VOCI.RID_MESE_ASS_CESS IS
  'Riduzione in funzione dei giorni effettivamente lavorati per assunzione e cessazione. Richiesto solo se Tipo = RB o AL e la voce prevede importi';
COMMENT ON COLUMN P200_VOCI.CASSA_COMPETENZA IS
  'Modalità di Calcolo: CS=In funzione della data di cassa (es. IRPEF); CM=In funzione della data di competenza (es. CPDEL), CC=Competenza con regole cassa (es. IRAP)';
COMMENT ON COLUMN P200_VOCI.VOCE_IMPORTO IS
  'La voce prevede importi (stipendio, rimborso spese, indennità, ritenute). Richiesto solo se Tipo = RB, AL o AS';
COMMENT ON COLUMN P200_VOCI.IMPORTO_AUTOMATICO IS
  'Importo calcolato automaticamente (stipendio, straordinario). Richiesto solo se Tipo = RB, AL o AS e la voce prevede importi';
COMMENT ON COLUMN P200_VOCI.IMPORTO_AUTOMATICO_TIPO IS
  'Tipo di importo automatico: Q=dipendente da quote, S=dipende da scaglioni (es. detrazioni per coniuge a carico), T=dipendente da tabelle (es. stipendi) o calcoli (es. arrotondamento). Richiesto solo se Tipo = RB, AL o AS e la voce prevede importo automatico. In alternativa al seguente';
COMMENT ON COLUMN P200_VOCI.IMPORTO IS
  'Importo unitario della voce quando fisso nella voce stessa (es. trattenuta mensa) oppure 0 quanto variabile ma manuale. Richiesto solo se Tipo = RB, AL o AS e la voce prevede importi. In alternativa al precedente';
COMMENT ON COLUMN P200_VOCI.IMPORTO_COLONNA IS
  'Colonna per stampa importo: D=Dato base; C=Competenza; R=Ritenuta dipendente; E=Ritenuta ente. Richiesto solo se la voce prevede importi';
COMMENT ON COLUMN P200_VOCI.VOCE_QUANTITA IS
  'La voce prevede quantità (straordinario, indennità, ferie). Richiesto solo se Tipo = RB, AL o AS';
COMMENT ON COLUMN P200_VOCI.COD_MISURAQUANTITA IS
  'Unità di misura per le quantità. Richiesto solo se la voce prevede quantità';
COMMENT ON COLUMN P200_VOCI.RITENUTA_MASSIMALI_SCAGLIONI IS
  'La ritenuta dipende da massimali/scaglioni. Richiesto solo se Tipo = RI';
COMMENT ON COLUMN P200_VOCI.RITENUTA_PERC IS
  'Percentuale ritenuta se indipendente da massimali/scaglioni. Richiesto solo se Tipo = RI';
COMMENT ON COLUMN P200_VOCI.IMPONIBILE_MINIMALI IS
  'L''imponibile prevede minimali. Richiesto solo se Tipo = IM';
COMMENT ON COLUMN P200_VOCI.COD_ARROTONDAMENTO IS
  'Codice arrotondamento. Richiesto solo se la voce prevede importi';
COMMENT ON COLUMN P200_VOCI.PERC_MATURA13A IS
  '% di maturazione automatica della tredicesima. Richiesto solo se Tipo = RB o AL e la voce prevede importi';
COMMENT ON COLUMN P200_VOCI.MOSTRA_VIDEO IS
  'Il calcolo della voce viene visualizzato a video';
COMMENT ON COLUMN P200_VOCI.CONFRONTO_MENSILE IS
  'Inserimento nel confronto mensile';
COMMENT ON COLUMN P200_VOCI.STAMPA_CEDOLINO IS
  'La voce viene stampata sul cedolino';
COMMENT ON COLUMN P200_VOCI.STAMPA_COMPETENZA IS
  'La descrizione viene integrata con la data di competenza';
COMMENT ON COLUMN P200_VOCI.STAMPA_COMPETENZA_QUOTE IS
  'La descrizione viene integrata con la data di competenza delle quote. Richiesto solo se tipo di importo automatico = Q';
COMMENT ON COLUMN P200_VOCI.COD_CAUSALEIRPEF IS
  'Causale di versamento IRPEF. Richiesto solo se la voce prevede importi';
COMMENT ON COLUMN P200_VOCI.RIDOTTA_PARTTIME_VERT IS
  'La voce è ridotta dal part-time verticale. Richiesto solo se Tipo = RB, AL o AS e la voce prevede importi';
COMMENT ON COLUMN P200_VOCI.RIDOTTA_PARTTIME_ORIZZ IS
  'La voce è ridotta dal part-time orizzontale. Richiesto solo se Tipo = RB, AL o AS e la voce prevede importi';
COMMENT ON COLUMN P200_VOCI.NO_CEDOLINO_NORMALE IS
  'La voce di assenza comporta la non emissione del cedolino normale se copre i giorni di calendario mensili. Richiesto solo se Tipo = AS';
COMMENT ON COLUMN P200_VOCI.FORZA_GGCALCOLO_QUOTE IS
  'La voce di assenza con quote viene forzata ai giorni contrattuali o al divisore contrattuale per il calcolo delle quote stesse se copre i giorni di calendario mensili. Richiesto solo se Tipo = AS e tipo di importo automatico = Q';
COMMENT ON COLUMN P200_VOCI.ABBATTE_GGMINIMALI IS
  'La voce di assenza abbatte giorni per calcolo minimali. Richiesto solo se Tipo = AS';
COMMENT ON COLUMN P200_VOCI.ABBATTE_GGDETRAZ_CARICOFAM IS
  'La voce di assenza abbatte il diritto mensile alle detrazioni per carichi di famiglia quando le assenze di questo tipo coprono i giorni di calendario mensili. Richiesto solo se Tipo = AS';
COMMENT ON COLUMN P200_VOCI.ABBATTE_GGDETRAZ_LAVDIP IS
  'La voce di assenza abbatte giorni per detrazioni lavoro dipendente. Richiesto solo se Tipo = AS';
COMMENT ON COLUMN P200_VOCI.ABBATTE_GGANF IS
  'La voce di assenza abbatte giorni per diritto ANF se non lavorato il minimo mensile/settimanale. Richiesto solo se Tipo = AS';
COMMENT ON COLUMN P200_VOCI.CUMULO_ANNUALE_CEDOLONE IS
  'Cumulo della voce in stampa: NS=non stampa, NC=nessun cumulo di dati, IQ=cumula importi e quantita'' (se stesso dato base es. stipendio, indennità, straordinari), ID=cumula importi e dato base (se stessa quantita'' es. ritenuta INADELP), IB=cumula importi e dato base (es. ritenuta CPDEL e abblenca quantita''), IM=cumula importi (se stesso dato base e abblenca quantita'')';
COMMENT ON COLUMN P200_VOCI.COD_RAGGRUPPAMENTO IS
  'Codice di raggruppamento per le voci (es. voci base della qualifica)';
COMMENT ON COLUMN P200_VOCI.PERC_ABBATTE13A IS
  '% di abbattimento della tredicesima. Richiesto solo se Tipo = AS';
COMMENT ON COLUMN P200_VOCI.CUMULO_IN_CALCOLO IS
  'Cumulo in fase di calcolo: M=se stesso mese, P=se stesso periodo, N=No';
COMMENT ON COLUMN P200_VOCI.COD_VOCE_LINK_ASSOG IS
  'Codice voce con assoggettamenti collegati';
COMMENT ON COLUMN P200_VOCI.COD_VOCE_SPECIALE_LINK_ASSOG IS
  'Codice Speciale con assoggettamenti collegati';
COMMENT ON COLUMN P200_VOCI.DIVISORE_QUOTE IS
  'Divisore diverso da quello contrattuale da applicare nel calcolo quote (opzionale)';
COMMENT ON COLUMN P200_VOCI.ABBATTE_GGINP IS
  'La voce di assenza abbatte giorni utili INPS. Richiesto solo se Tipo = AS';
COMMENT ON COLUMN P200_VOCI.ABBATTE_GGINA IS
  'La voce di assenza abbatte giorni utili INAIL. Richiesto solo se Tipo = AS';
COMMENT ON COLUMN P200_VOCI.PROGRAMMATA IS
  'Voce inserita solo se programmata a livello di dipendente';
COMMENT ON COLUMN P200_VOCI.ONERI_DETRAZIONI IS
  'Oneri per i quali e'' prevista detrazione d''imposta. Richiesto solo se Tipo = IM';
COMMENT ON COLUMN P200_VOCI.ECCEZIONI_SENSIBILI IS
  'Eccezioni di calcolo a cui la voce e'' sensibile';

CREATE SEQUENCE P200_ID_VOCE
  MINVALUE 1
  NOMAXVALUE
  INCREMENT BY 1
  NOORDER
  NOCACHE;

ALTER TABLE P200_VOCI ADD CONSTRAINT P200_FK_P070
  FOREIGN KEY (COD_MISURAQUANTITA) REFERENCES P070_MISUREQUANTITA;

ALTER TABLE P200_VOCI ADD CONSTRAINT P200_FK_P080
  FOREIGN KEY (COD_CAUSALEIRPEF) REFERENCES P080_CAUSALIIRPEF;

ALTER TABLE P200_VOCI ADD CONSTRAINT P200_FK_P198
  FOREIGN KEY (COD_RAGGRUPPAMENTO) REFERENCES P198_RAGGRUPPAMENTOVOCI;

/*
Assoggettamenti delle voci
*/
CREATE TABLE P201_ASSOGGETTAMENTI (
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE_PADRE VARCHAR2(5),
  COD_VOCE_SPECIALE_PADRE VARCHAR2(5),
  COD_VOCE_FIGLIO VARCHAR2(5),
  COD_VOCE_SPECIALE_FIGLIO VARCHAR2(5),
  DECORRENZA DATE,
  ASSOGGETTAMENTO NUMBER DEFAULT 100,
  ASSOGGETTAMENTO13A NUMBER DEFAULT 0,
  CONSTRAINT P201_PK PRIMARY KEY (COD_CONTRATTO,COD_VOCE_PADRE,COD_VOCE_SPECIALE_PADRE,
    COD_VOCE_FIGLIO,COD_VOCE_SPECIALE_FIGLIO,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P201_ASSOGGETTAMENTI.ASSOGGETTAMENTO IS
  'Percentuale di assoggettamento con segno';
COMMENT ON COLUMN P201_ASSOGGETTAMENTI.ASSOGGETTAMENTO13A IS
  'Percentuale di assoggettamento con segno sulla tredicesima. Richiesto solo se Tipo voce = RA';

/*
Calcolo quote delle voci
*/
CREATE TABLE P205_QUOTE (
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE_DA_QUOTARE VARCHAR2(5),
  COD_VOCE_SPECIALE_DA_QUOTARE VARCHAR2(5),
  COD_VOCE_IN_QUOTA VARCHAR2(5),
  COD_VOCE_SPECIALE_IN_QUOTA VARCHAR2(5),
  DECORRENZA DATE,
  ACCUMULO NUMBER DEFAULT 100 NOT NULL,
  ACCUMULO_RATEO NUMBER DEFAULT 0 NOT NULL,
  COD_VOCE_SPECIALE_DETTAGLIO VARCHAR2(5),
  CONSTRAINT P205_PK PRIMARY KEY (COD_CONTRATTO,COD_VOCE_DA_QUOTARE,COD_VOCE_SPECIALE_DA_QUOTARE,
    COD_VOCE_IN_QUOTA,COD_VOCE_SPECIALE_IN_QUOTA,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P205_QUOTE.ACCUMULO IS
  'Percentuale di accumulo con segno';
COMMENT ON COLUMN P205_QUOTE.ACCUMULO_RATEO IS
  'Percentuale di accumulo rateo con segno';
COMMENT ON COLUMN P205_QUOTE.COD_VOCE_SPECIALE_DETTAGLIO IS
  'Codice speciale per dettagliare ogni voce in quota, se presente comporta la creazione di una voce con lo stesso codice di quella in quota e come codice speciale il campo stesso';

/*
Variazioni INPDAP causa assenze
*/
CREATE TABLE P206_ASSENZEINPDAP (
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  DECORRENZA DATE,
  ELIMINA_SEZIONE VARCHAR2(1) DEFAULT 'N',
  ABBATTE_GGTFR VARCHAR2(1) DEFAULT 'N',
  ABBATTE_GGUTILI VARCHAR2(1) DEFAULT 'N',
  COD_TIPOSERVIZIO VARCHAR2(5),
  COD_GESTASSIC_NONCOPERTE VARCHAR2(40),
  CONSTRAINT P206_PK PRIMARY KEY (COD_CONTRATTO,COD_VOCE,COD_VOCE_SPECIALE,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P206_ASSENZEINPDAP.ELIMINA_SEZIONE IS
  'La voce di assenza elimina sezione INPDAP';
COMMENT ON COLUMN P206_ASSENZEINPDAP.ABBATTE_GGTFR IS
  'La voce di assenza abbatte giorni utili TFR';
COMMENT ON COLUMN P206_ASSENZEINPDAP.ABBATTE_GGUTILI IS
  'La voce di assenza abbatte giorni utili';
COMMENT ON COLUMN P206_ASSENZEINPDAP.COD_TIPOSERVIZIO IS
  'Eventuale nuovo tipo di servizio causa assenza';
COMMENT ON COLUMN P206_ASSENZEINPDAP.COD_GESTASSIC_NONCOPERTE IS
  'Elenco gestioni assicurative non piu'' coperte causa assenza (campo multiplo con virgola per separatore)';

/*
Riassorbimento delle voci
*/
CREATE TABLE P208_RIASSORBIMENTO (
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE_RIASSORBIB VARCHAR2(5),
  COD_VOCE_SPECIALE_RIASSORBIB VARCHAR2(5),
  COD_VOCE_RIASSORBENTE VARCHAR2(5),
  COD_VOCE_SPECIALE_RIASSORBENTE VARCHAR2(5),
  DECORRENZA DATE,
  AUMENTO_CONTRATTUALE VARCHAR2(1) DEFAULT 'N',
  PASSAGGIO_POSIZIONE VARCHAR2(1) DEFAULT 'N',
  NUOVA_VOCE VARCHAR2(1) DEFAULT 'N',
  CONSTRAINT P208_PK PRIMARY KEY (COD_CONTRATTO,COD_VOCE_RIASSORBIB,COD_VOCE_SPECIALE_RIASSORBIB,
    COD_VOCE_RIASSORBENTE,COD_VOCE_SPECIALE_RIASSORBENTE,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P208_RIASSORBIMENTO.AUMENTO_CONTRATTUALE IS
  'Riassorbimento su aumento contrattuale (S/N)';
COMMENT ON COLUMN P208_RIASSORBIMENTO.PASSAGGIO_POSIZIONE IS
  'Riassorbimento su passaggio di posizione economica (S/N)';
COMMENT ON COLUMN P208_RIASSORBIMENTO.NUOVA_VOCE IS
  'Riassorbimento su attribuzione nuova voce (S/N)';

/*
Contratti
*/
CREATE TABLE P210_CONTRATTI (
  COD_CONTRATTO VARCHAR2(5),
  DECORRENZA DATE,
  DESCRIZIONE VARCHAR2(40),
  NOTE VARCHAR2(2000),
  CONSTRAINT P210_PK PRIMARY KEY (COD_CONTRATTO,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

/*
Parametri stipendi
*/
CREATE TABLE P212_PARAMETRISTIPENDI (
  COD_PARAMETRISTIPENDI VARCHAR2(5),
  DECORRENZA DATE,
  DESCRIZIONE VARCHAR2(40),
  DATA_APPROVAZIONE DATE,
  DATA_APPLICAZIONE DATE,
  DATA_SCADENZA DATE,
  ORE_SETTIMANA NUMBER(5,2),
  ORE_MESE NUMBER(5,2),
  GIORNI_MESE NUMBER(2) NOT NULL,
  DOMENICA_INFLUENTE VARCHAR2(1) DEFAULT 'S',
  SABATO_INFLUENTE VARCHAR2(1) DEFAULT 'S',
  SETTIMANE_ANNO NUMBER(2),
  TIPO_RIDUZIONE_STIPENDIO VARCHAR2(3) DEFAULT 'GCN',
  CONGUAGLIO VARCHAR2(1) DEFAULT 'S',
  TREDICESIMA VARCHAR2(1) DEFAULT 'S',
  TIPO_MATURAZIONE13A VARCHAR2(2) DEFAULT 'ML',
  TIPO_CALCOLO_IMPORTO13A VARCHAR2(2) DEFAULT 'RM',
  NOTE VARCHAR2(2000),
  GIORNO_CALCOLO13A NUMBER(2) DEFAULT 15 NOT NULL,
  MESI_POSTICIPO13A NUMBER(1) DEFAULT 2 NOT NULL,
  INCLUDI_13A VARCHAR2(1) DEFAULT 'N' NOT NULL,
  TIPO_ABBATTIMENTO13A VARCHAR2(1) DEFAULT 'R' NOT NULL,
  GIORNI_INPS NUMBER(2) DEFAULT 26 NOT NULL,
  TIPO_ARROTONDAMENTO_GGINPS VARCHAR2(1) DEFAULT 'P' NOT NULL,
  MENS_REDDITO_NO_TAX NUMBER(2) DEFAULT 13 NOT NULL,
  CONSTRAINT P212_PK PRIMARY KEY (COD_PARAMETRISTIPENDI,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P212_PARAMETRISTIPENDI.DATA_APPROVAZIONE IS
  'Data approvazione';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.DATA_APPLICAZIONE IS
  'Data applicazione';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.DATA_SCADENZA IS
  'Data scadenza';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.ORE_SETTIMANA IS
  'Ore lavorative della settimana';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.ORE_MESE IS
  'Ore del mese (decimali in centesimi)';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.GIORNI_MESE IS
  'Giorni del mese';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.DOMENICA_INFLUENTE IS
  'Domenica influente ai fini stipendiali (S/N)';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.SABATO_INFLUENTE IS
  'Sabato influente ai fini stipendiali (S/N)';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.SETTIMANE_ANNO IS
  'Settimane dell''anno';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.TIPO_RIDUZIONE_STIPENDIO IS
  'Tipo riduzione stipendio per assunzione/cessazione: GCN=Giorni del mese da contratto; GCL=Giorni del mese da calendario';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.CONGUAGLIO IS
  'Conguaglio IRPEF (S/N)';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.TREDICESIMA IS
  'Tredicesima (S/N)';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.TIPO_MATURAZIONE13A IS
  'Tipo maturazione tredicesima per inizio/fine rapporto: GL=Rapportato ai giorni effettivamente lavorati (30 - ), ML=Pagamento di tutto il mese se superati 15 (30/2) giorni lavorati (30 - )';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.TIPO_CALCOLO_IMPORTO13A IS
  'Tipo calcolo importo tredicesima: UM=Calcolo considerando solo la retribuzione dell''ultimo mese; RM=Calcolo considerando la retribuzione di tutti i mesi';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.GIORNO_CALCOLO13A IS
  'Giorno di dicembre per calcolo tredicesima';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.MESI_POSTICIPO13A IS
  'Numeri mesi di posticipo tredicesima rispetto al mese di dimissione';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.INCLUDI_13A IS
  'Inclusione tredicesima nel cedolino di dicembre (S/N)';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.TIPO_ABBATTIMENTO13A IS
  'Tipo abbatimento 13a in caso di assenza: C=Complessivo se percentualizzando i giorni di assenza i giorni utili non superano la meta'' dei giorni contrattuali, R=Rapportato ai giorni di assenza';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.GIORNI_INPS IS
  'Giorni INPS del mese';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.TIPO_ARROTONDAMENTO_GGINPS IS
  'Tipo arrotondamento per mesi non interamente lavorati: E=Eccesso, D=Difetto, P=Puro';
COMMENT ON COLUMN P212_PARAMETRISTIPENDI.MENS_REDDITO_NO_TAX IS
  'Numero mensilita'' per calcolo reddito annuale no-tax area';

/*
Tipo accorpamento voci
*/
CREATE TABLE P214_TIPOACCORPAMENTOVOCI (
  COD_TIPOACCORPAMENTOVOCI VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  CONSTRAINT P214_PK PRIMARY KEY (COD_TIPOACCORPAMENTOVOCI)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

/*
Codici accorpamento voci
*/
CREATE TABLE P215_CODICIACCORPAMENTOVOCI (
  COD_TIPOACCORPAMENTOVOCI VARCHAR2(5),
  COD_CODICIACCORPAMENTOVOCI VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  CONSTRAINT P215_PK PRIMARY KEY (COD_TIPOACCORPAMENTOVOCI,COD_CODICIACCORPAMENTOVOCI)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

ALTER TABLE P215_CODICIACCORPAMENTOVOCI ADD CONSTRAINT P215_FK_P214
  FOREIGN KEY (COD_TIPOACCORPAMENTOVOCI) REFERENCES P214_TIPOACCORPAMENTOVOCI
  ON DELETE CASCADE;

/*
Accorpamento delle voci
*/
CREATE TABLE P216_ACCORPAMENTOVOCI (
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  COD_TIPOACCORPAMENTOVOCI VARCHAR2(5),
  COD_CODICIACCORPAMENTOVOCI VARCHAR2(5),
  DECORRENZA DATE,
  PERCENTUALE NUMBER DEFAULT 100,
  IMPORTO_COLONNA VARCHAR2(1) DEFAULT 'C',
  CONSTRAINT P216_PK PRIMARY KEY (COD_CONTRATTO,COD_VOCE,COD_VOCE_SPECIALE,
    COD_TIPOACCORPAMENTOVOCI,COD_CODICIACCORPAMENTOVOCI,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P216_ACCORPAMENTOVOCI.PERCENTUALE IS
  'Percentuale di cumulo nel codice accorpamento';
COMMENT ON COLUMN P216_ACCORPAMENTOVOCI.IMPORTO_COLONNA IS
  'Colonna per stampa importo: C=Competenza, R=Ritenuta dipendente, E=Ritenuta ente';

ALTER TABLE P216_ACCORPAMENTOVOCI ADD CONSTRAINT P216_FK_P215
  FOREIGN KEY (COD_TIPOACCORPAMENTOVOCI,COD_CODICIACCORPAMENTOVOCI) REFERENCES P215_CODICIACCORPAMENTOVOCI
  ON DELETE CASCADE;

/*
Livelli economici
*/
CREATE TABLE P220_LIVELLI (
  COD_CONTRATTO VARCHAR2(5),
  COD_POSIZIONE_ECONOMICA VARCHAR2(5),
  DECORRENZA DATE,
  ID_LIVELLO NUMBER,
  CATEGORIA_ECONOMICA VARCHAR2(5),
  COD_LIVELLO VARCHAR2(5),
  DESCRIZIONE VARCHAR2(100),
  CONSTRAINT P220_PK PRIMARY KEY (COD_CONTRATTO,COD_POSIZIONE_ECONOMICA,DECORRENZA)
    USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
    TABLESPACE INDICI pctfree 10,
  CONSTRAINT P220_UQ_ID_LIVELLO UNIQUE (ID_LIVELLO)
    USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
    TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P220_LIVELLI.COD_POSIZIONE_ECONOMICA IS
  'Posizione economica (es.:A1, A2, B1, ...)';
COMMENT ON COLUMN P220_LIVELLI.CATEGORIA_ECONOMICA IS
  'Categoria economica (es.:A, B, ...)';
COMMENT ON COLUMN P220_LIVELLI.COD_LIVELLO IS
  'Solo descrittivo';

/*
Importi per livelli economici
Integrità referenziali: P220_LIVELLI
*/
CREATE TABLE P221_LIVELLIIMPORTI (
  ID_LIVELLO NUMBER,
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  IMPORTO NUMBER NOT NULL,
  EROGAZIONE_MESI VARCHAR2(12) DEFAULT 'SSSSSSSSSSSS',
  CONSTRAINT P221_PK PRIMARY KEY (ID_LIVELLO,COD_VOCE,COD_VOCE_SPECIALE)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P221_LIVELLIIMPORTI.EROGAZIONE_MESI IS
  'Erogazione nei 12 mesi (S/N)';

ALTER TABLE P221_LIVELLIIMPORTI ADD CONSTRAINT P221_FK_P220
  FOREIGN KEY (ID_LIVELLO) REFERENCES P220_LIVELLI(ID_LIVELLO)
  ON DELETE CASCADE;

CREATE SEQUENCE P221_ID_LIVELLO
  MINVALUE 1
  NOMAXVALUE
  INCREMENT BY 1
  NOORDER
  NOCACHE;

/*
Minimali delle voci
*/
CREATE TABLE P230_MINIMALI (
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  DECORRENZA DATE,
  IMPORTO_TEMPO_PIENO NUMBER NOT NULL,
  IMPORTO_PART_TIME NUMBER NOT NULL,
  TIPO_IMPORTO VARCHAR2(1) DEFAULT 'A',
  TIPO_INTEGRAZIONE VARCHAR2(1) DEFAULT 'O',
  COD_VOCE_INTEGRAZIONE VARCHAR2(5),
  COD_VOCE_SPECIALE_INTEGRAZIONE VARCHAR2(5),
  CONSTRAINT P230_PK PRIMARY KEY (COD_CONTRATTO,COD_VOCE,COD_VOCE_SPECIALE,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P230_MINIMALI.IMPORTO_TEMPO_PIENO IS
  'Importo minimale per il tempo pieno';
COMMENT ON COLUMN P230_MINIMALI.IMPORTO_PART_TIME IS
  'Importo minimale per il part-time';
COMMENT ON COLUMN P230_MINIMALI.TIPO_IMPORTO IS
  'Tipo importo: G=Giornaliero; M=Mensile; A=Annuale';
COMMENT ON COLUMN P230_MINIMALI.TIPO_INTEGRAZIONE IS
  'Tipo integrazione: O=Sulla voce imponibile originale; N=Sulla nuova voce imponibile (es.ente per dipendente)';
COMMENT ON COLUMN P230_MINIMALI.COD_VOCE_INTEGRAZIONE IS
  'Voce contenente l''importo aggiuntivo: nel Tipo integrazione O non subisce assoggettamenti; nel Tipo integrazione N subisce assoggettamenti dell''uopo';

/*
Scaglioni massimali legati alle voci
*/
CREATE TABLE P232_SCAGLIONI (
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  DECORRENZA DATE,
  ID_SCAGLIONE NUMBER,
  TIPO_IMPORTO VARCHAR2(1) DEFAULT 'A',
  TIPO_RITENUTA VARCHAR2(1) DEFAULT 'P',
  TIPO_APPLICAZIONE VARCHAR2(1) DEFAULT 'M',
  CONGUAGLIO_ANNUALE VARCHAR2(1) DEFAULT 'N',
  CONGUAGLIO_FINE_RAPPORTO VARCHAR2(1) DEFAULT 'N',
  CONGUAGLIO_DOPO_FINE_RAPPORTO VARCHAR2(1) DEFAULT 'N',
  COD_VOCE_CONGUAGLIO VARCHAR2(5),
  COD_VOCE_SPECIALE_CONGUAGLIO VARCHAR2(5),
  CONSTRAINT P232_PK PRIMARY KEY (COD_CONTRATTO,COD_VOCE,COD_VOCE_SPECIALE,DECORRENZA)
    USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
    TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P232_SCAGLIONI.TIPO_IMPORTO IS
  'Tipo importo: M=Mensile; A=Annuale';
COMMENT ON COLUMN P232_SCAGLIONI.TIPO_RITENUTA IS
  'Tipo ritenuta: P=Percentuale; I=Importo';
COMMENT ON COLUMN P232_SCAGLIONI.TIPO_APPLICAZIONE IS
  'Tipo applicazione: P=Al raggiungimento progressivo della soglia; M=Rapporto mensile; N=Non parametrizzabile';
COMMENT ON COLUMN P232_SCAGLIONI.CONGUAGLIO_ANNUALE IS
  'Effettuazione conguaglio di fine anno(dicembre):S/N richiesto solo per Tipo_Applicazione = M';
COMMENT ON COLUMN P232_SCAGLIONI.CONGUAGLIO_FINE_RAPPORTO IS
  'Effettuazione conguaglio in caso di fine rapporto:S/N richiesto solo per Tipo_Applicazione = M';
COMMENT ON COLUMN P232_SCAGLIONI.CONGUAGLIO_DOPO_FINE_RAPPORTO IS
  'Effettuazione conguaglio su eventuali cedolini successivi alla fine rapporto:S/N richiesto solo per Tipo_Applicazione = M';

/*
Scaglioni fasce importi massimali 
Integrità referenziali: P232_SCAGLIONI
*/
CREATE TABLE P233_SCAGLIONIFASCE (
  ID_SCAGLIONE NUMBER,
  IMPORTO_DA NUMBER,
  IMPORTO_A NUMBER NOT NULL,
  PERC_IMP NUMBER NOT NULL,
  CONSTRAINT P233_PK PRIMARY KEY (ID_SCAGLIONE,IMPORTO_DA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P233_SCAGLIONIFASCE.IMPORTO_DA IS
  'Importo iniziale massimale/scaglione';
COMMENT ON COLUMN P233_SCAGLIONIFASCE.IMPORTO_A IS
  'Importo finale massimale/scaglione (=0 sull''ultimo scaglione)';
COMMENT ON COLUMN P233_SCAGLIONIFASCE.PERC_IMP IS
  'Percentuale o importo dello scaglione';

CREATE SEQUENCE P233_ID_SCAGLIONE
  MINVALUE 1
  NOMAXVALUE
  INCREMENT BY 1
  NOORDER
  NOCACHE;

/*
Tabelle importi per assegni nucleo familiare
*/
CREATE TABLE P236_TABELLEANF (
  COD_TABELLAANF VARCHAR2(5),
  DECORRENZA DATE,
  ID_TABELLAANF NUMBER,
  DESCRIZIONE VARCHAR2(200),
  CONSTRAINT P236_PK PRIMARY KEY (COD_TABELLAANF,DECORRENZA)
    USING INDEX STORAGE (PCTINCREASE 0) TABLESPACE INDICI,
  CONSTRAINT P236_UK_ID_TABELLAANF UNIQUE (ID_TABELLAANF)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

/*
Tabelle importi per assegni nucleo familiare
Integrità referenziali: P236_TABELLEANF
*/
CREATE TABLE P238_TABELLEANFSCAGLIONI (
  ID_TABELLAANF NUMBER,
  IMPORTO_DA NUMBER,
  IMPORTO_A NUMBER NOT NULL,
  IMPORTO_COMPONENTI_1 NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_COMPONENTI_2 NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_COMPONENTI_3 NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_COMPONENTI_4 NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_COMPONENTI_5 NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_COMPONENTI_6 NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_COMPONENTI_7 NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_COMPONENTI_8 NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_COMPONENTI_9 NUMBER DEFAULT 0 NOT NULL,
  CONSTRAINT P238_PK PRIMARY KEY (ID_TABELLAANF,IMPORTO_DA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P238_TABELLEANFSCAGLIONI.IMPORTO_DA IS
  'Importo iniziale livello di reddito familiare';
COMMENT ON COLUMN P238_TABELLEANFSCAGLIONI.IMPORTO_A IS
  'Importo finale livello di reddito familiare';
COMMENT ON COLUMN P238_TABELLEANFSCAGLIONI.IMPORTO_COMPONENTI_1 IS
  'Importo dell''assegno per numero dei componenti il nucleo = 1';

ALTER TABLE P238_TABELLEANFSCAGLIONI ADD CONSTRAINT P238_FK_P236
  FOREIGN KEY (ID_TABELLAANF) REFERENCES P236_TABELLEANF(ID_TABELLAANF)
  ON DELETE CASCADE;

CREATE SEQUENCE P238_ID_TABELLAANF
  MINVALUE 1
  NOMAXVALUE
  INCREMENT BY 1
  NOORDER
  NOCACHE;

/*
Tabelle tipi assoggettamenti
*/
CREATE TABLE P240_TIPIASSOGGETTAMENTI (
  COD_TIPOASSOGGETTAMENTO VARCHAR2(5),
  COD_CONTRATTO VARCHAR2(5),
  DECORRENZA DATE,
  ID_TIPOASSOGGETTAMENTO NUMBER,
  DESCRIZIONE VARCHAR2(40),
  CONSTRAINT P240_PK PRIMARY KEY (COD_TIPOASSOGGETTAMENTO,COD_CONTRATTO,DECORRENZA)
    USING INDEX STORAGE (PCTINCREASE 0) TABLESPACE INDICI,
  CONSTRAINT P240_UK_ID_TABELLAANF UNIQUE (ID_TIPOASSOGGETTAMENTO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

/*
Tabelle voci per tipi assoggettamenti
Integrità referenziali: P240_TIPIASSOGGETTAMENTI
*/
CREATE TABLE P242_TIPIASSOGGETTAMENTIVOCI (
  ID_TIPOASSOGGETTAMENTO NUMBER,
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  CONSTRAINT P242_PK PRIMARY KEY (ID_TIPOASSOGGETTAMENTO,COD_VOCE,COD_VOCE_SPECIALE)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

ALTER TABLE P242_TIPIASSOGGETTAMENTIVOCI ADD CONSTRAINT P242_FK_P240
  FOREIGN KEY (ID_TIPOASSOGGETTAMENTO) REFERENCES P240_TIPIASSOGGETTAMENTI(ID_TIPOASSOGGETTAMENTO)
  ON DELETE CASCADE;

CREATE SEQUENCE P242_ID_TIPOASSOGGETTAMENTO
  MINVALUE 1
  NOMAXVALUE
  INCREMENT BY 1
  NOORDER
  NOCACHE;

/*
Voci stipendiali aggiuntive
*/
CREATE TABLE P250_VOCIAGGIUNTIVE (
  COD_CONTRATTO VARCHAR2(5),
  NOME_VOCEAGGIUNTIVA VARCHAR2(30),
  DECORRENZA DATE,
  DESCRIZIONE VARCHAR2(40),
  ATTIVA VARCHAR2(1) DEFAULT 'S',
  CONSTRAINT P250_PK PRIMARY KEY (COD_CONTRATTO,NOME_VOCEAGGIUNTIVA,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P250_VOCIAGGIUNTIVE.NOME_VOCEAGGIUNTIVA IS
  'Nome colonna dato libero su tabella anagrafica';
COMMENT ON COLUMN P250_VOCIAGGIUNTIVE.ATTIVA IS
  'Attiva (S/N)';

/*
Importi voci stipendiali libere es. Indennita' professionali
Integrità referenziali: P250_VOCIAGGIUNTIVE
*/
CREATE TABLE P252_VOCIAGGIUNTIVEIMPORTI (
  COD_CONTRATTO VARCHAR2(5),
  NOME_VOCEAGGIUNTIVA VARCHAR2(30),
  CODICE VARCHAR2(80),
  DECORRENZA DATE,
  DESCRIZIONE VARCHAR2(40),
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  IMPORTO NUMBER,
  EROGAZIONE_MESI VARCHAR2(12) DEFAULT 'SSSSSSSSSSSS',
  CONSTRAINT P252_PK PRIMARY KEY (COD_CONTRATTO,NOME_VOCEAGGIUNTIVA,CODICE,DECORRENZA)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P252_VOCIAGGIUNTIVEIMPORTI.NOME_VOCEAGGIUNTIVA IS
  'Nome del campo dato libero dell''anagrafico che gestisce la voce aggiuntiva';
COMMENT ON COLUMN P252_VOCIAGGIUNTIVEIMPORTI.EROGAZIONE_MESI IS
  'Erogazione nei 12 mesi (S/N)';

ALTER TABLE P252_VOCIAGGIUNTIVEIMPORTI ADD CONSTRAINT P252_FK_P250
  FOREIGN KEY (COD_CONTRATTO,NOME_VOCEAGGIUNTIVA,DECORRENZA) REFERENCES P250_VOCIAGGIUNTIVE
  ON DELETE CASCADE;

/*
Voci programmate
Integrità referenziali: T030_ANAGRAFICO
*/
CREATE TABLE P254_VOCIPROGRAMMATE (
  PROGRESSIVO NUMBER,
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  DATA_INIZIO DATE,
  DATA_FINE DATE,
  ATTIVA VARCHAR2(1) DEFAULT 'S',
  SALDATA VARCHAR2(1) DEFAULT 'N',
  IMPORTO_TOTALE NUMBER DEFAULT 0 NOT NULL,
  CESSIONE_QUINTO VARCHAR2(1) DEFAULT 'N',
  IMPORTO_RATA NUMBER DEFAULT 0 NOT NULL,
  PERIODICITA_RATA NUMBER(2) DEFAULT 1 NOT NULL,
  CONSTRAINT P254_PK PRIMARY KEY (PROGRESSIVO,COD_CONTRATTO,COD_VOCE,COD_VOCE_SPECIALE,DATA_INIZIO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 1M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 1M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P254_VOCIPROGRAMMATE.DATA_FINE IS
  'Data di scadenza non obbligatoria';
COMMENT ON COLUMN P254_VOCIPROGRAMMATE.ATTIVA IS
  'Attiva (S/N) indica se la voce programmata deve entrare nel conteggio del mese';
COMMENT ON COLUMN P254_VOCIPROGRAMMATE.SALDATA IS
  'Saldata (S/N) indica se la voce programmata è stata saldata';
COMMENT ON COLUMN P254_VOCIPROGRAMMATE.IMPORTO_TOTALE IS
  'Importo totale (=0 per voci fisse senza totali da scalare)';
COMMENT ON COLUMN P254_VOCIPROGRAMMATE.CESSIONE_QUINTO IS
  'Cessione del quinto (S/N). Se S non si richiedono i dati successivi';
COMMENT ON COLUMN P254_VOCIPROGRAMMATE.PERIODICITA_RATA IS
  'Numero mesi di differenza tra ogni rata';

ALTER TABLE P254_VOCIPROGRAMMATE ADD CONSTRAINT P254_FK_T030
  FOREIGN KEY (PROGRESSIVO) REFERENCES T030_ANAGRAFICO;

/*
Voci riassorbibili
Integrità referenziali: T030_ANAGRAFICO
*/
CREATE TABLE P256_VOCIRIASSORBIBILI (
  PROGRESSIVO NUMBER,
  COD_CONTRATTO VARCHAR2(5),
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  DATA_INIZIO DATE,
  IMPORTO_INIZIALE NUMBER NOT NULL,
  IMPORTO_RESIDUO NUMBER NOT NULL,
  IMPORTO_RIASSORBITO NUMBER DEFAULT 0 NOT NULL,
  CONSTRAINT P256_PK PRIMARY KEY (PROGRESSIVO,COD_CONTRATTO,COD_VOCE,COD_VOCE_SPECIALE,DATA_INIZIO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 1M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 1M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P256_VOCIRIASSORBIBILI.IMPORTO_INIZIALE IS
  'Importo iniziale da riassorbire';
COMMENT ON COLUMN P256_VOCIRIASSORBIBILI.IMPORTO_RESIDUO IS
  'Importo residuo da riassorbire';
COMMENT ON COLUMN P256_VOCIRIASSORBIBILI.IMPORTO_RIASSORBITO IS
  'Importo riassorbito dal cedolino aperto';

ALTER TABLE P256_VOCIRIASSORBIBILI ADD CONSTRAINT P256_FK_T030
  FOREIGN KEY (PROGRESSIVO) REFERENCES T030_ANAGRAFICO;

/*
Addizionali Irpef (Comunali,Provinciali,Regionali)
Integrità referenziali: T030_ANAGRAFICO  
*/
CREATE TABLE P258_ADDIZIONALIIRPEF (
  PROGRESSIVO NUMBER,
  ANNO NUMBER(4),
  TIPO_ADDIZIONALE VARCHAR2(1) DEFAULT 'R',
  COD_ENTE VARCHAR2(6) NOT NULL,
  PERCENTUALE NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_TOTALE NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_PAGATO NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_RESTITUITO NUMBER DEFAULT 0 NOT NULL,
  NUMERO_RATE NUMBER DEFAULT 11 NOT NULL,
  IMPORTO_TOTALE_CALCOLATO NUMBER DEFAULT 0 NOT NULL,
  CONSTRAINT P258_PK PRIMARY KEY (PROGRESSIVO,ANNO,TIPO_ADDIZIONALE)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 1M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 1M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P258_ADDIZIONALIIRPEF.TIPO_ADDIZIONALE IS
  'Tipo addizionale: C=Comunale; P=Provinciale; R=Regionale';
COMMENT ON COLUMN P258_ADDIZIONALIIRPEF.COD_ENTE IS
  'Codice del comune, provincia o regione';
COMMENT ON COLUMN P258_ADDIZIONALIIRPEF.IMPORTO_TOTALE IS
  'Importo totale annuale dovuto';
COMMENT ON COLUMN P258_ADDIZIONALIIRPEF.IMPORTO_PAGATO IS
  'Importo gia'' pagato da detrarre dall''importo totale annuale dovuto';
COMMENT ON COLUMN P258_ADDIZIONALIIRPEF.IMPORTO_RESTITUITO IS
  'Importo restituito da sommare all''importo totale annuale dovuto';
COMMENT ON COLUMN P258_ADDIZIONALIIRPEF.NUMERO_RATE IS
  'Numero rate mensili a decorrere da inizio anno';
COMMENT ON COLUMN P258_ADDIZIONALIIRPEF.IMPORTO_TOTALE_CALCOLATO IS
  'Importo totale calcolato dal cedolino aperto';

ALTER TABLE P258_ADDIZIONALIIRPEF ADD CONSTRAINT P258_FK_T030
  FOREIGN KEY (PROGRESSIVO) REFERENCES T030_ANAGRAFICO;

/*
Tipo importi modello 730
*/
CREATE TABLE P260_MOD730TIPOIMPORTI (
  ANNO NUMBER(4),
  COD_TIPOIMPORTO VARCHAR2(5),
  DESCRIZIONE VARCHAR2(40),
  TIPO_ENTE VARCHAR2(1) DEFAULT 'N',
  TIPO_IMPORTO VARCHAR2(1) DEFAULT 'R' NOT NULL,
  MESE_INIZIALE NUMBER(2) NOT NULL,
  MAX_NUMERO_RATE NUMBER(2) DEFAULT 1 NOT NULL,
  COD_VOCE VARCHAR2(5),
  COD_VOCE_SPECIALE VARCHAR2(5),
  INT_RATE NUMBER DEFAULT 0.5,
  COD_VOCE_INT_RATE VARCHAR2(5),
  COD_VOCE_SPECIALE_INT_RATE VARCHAR2(5),
  INT_RITARDO NUMBER DEFAULT 0.4,
  COD_VOCE_INT_RITARDO VARCHAR2(5),
  COD_VOCE_SPECIALE_INT_RITARDO VARCHAR2(5),
  ORDINE_PAGAMENTO_INCAPIENTE NUMBER (3,1),
  ATTRIBUZIONE_DIMESSI VARCHAR2(1) DEFAULT 'S',
  CONSTRAINT P260_PK PRIMARY KEY (ANNO,COD_TIPOIMPORTO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 512K)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 512K)
TABLESPACE LAVORO pctfree 10 pctused 40;

CREATE UNIQUE INDEX P260_ANNOVOCE ON P260_MOD730TIPOIMPORTI (ANNO,COD_VOCE,COD_VOCE_SPECIALE) 
STORAGE (pctincrease 0 initial 16K next 512K) 
TABLESPACE INDICI pctfree 10;

COMMENT ON COLUMN P260_MOD730TIPOIMPORTI.TIPO_IMPORTO IS
  'Tipo importo: R=Rimborso, T=Trattenuta';
COMMENT ON COLUMN P260_MOD730TIPOIMPORTI.TIPO_ENTE IS
  'Tipo ente: N=Nessuno, C=Comunale, P=Provinciale, R=Regionale';
COMMENT ON COLUMN P260_MOD730TIPOIMPORTI.MESE_INIZIALE IS
  'Mese iniziale della rateizzazione';
COMMENT ON COLUMN P260_MOD730TIPOIMPORTI.INT_RATE IS
  'Interessi mensili per la rateizzazione';
COMMENT ON COLUMN P260_MOD730TIPOIMPORTI.INT_RITARDO IS
  'Interessi mensili per ritardato pagamento causa incapienza stipendiale';
COMMENT ON COLUMN P260_MOD730TIPOIMPORTI.ORDINE_PAGAMENTO_INCAPIENTE IS
  'Ordine di pagamento dei vari tipi importi in caso di incapienza stipendiale';
COMMENT ON COLUMN P260_MOD730TIPOIMPORTI.ATTRIBUZIONE_DIMESSI IS
  'Attribuzione dell''importo in caso di dipendente dimesso (S/N)';

/*
Intestazione individuale modello 730
*/
CREATE TABLE P262_MOD730TESTATA (
  PROGRESSIVO NUMBER,
  ANNO NUMBER(4),
  COD_CAAF VARCHAR2(10),
  DATA_ARRIVO_MOD730 DATE,
  DATA_ARRIVO_RETTIF DATE,
  DATA_ARRIVO_INTEGR DATE,
  DATA_SOSP_IRPEF DATE,
  DATA_SOSP_ADDIZ_REG DATE,
  DATA_SOSP_ADDIZ_PROV DATE,
  DATA_SOSP_ADDIZ_COM DATE,
  DATA_SOSP_TASS_SEP DATE,
  COD_TIPOCONG VARCHAR2(5),
  COD_RETTIF VARCHAR2(5),
  COD_ESITO_2RATA VARCHAR2(5),
  COD_ESITO_CONGNONEFF VARCHAR2(5),
  INTEGRATIVO VARCHAR2(1) DEFAULT 'N',
  NON_LIQUID VARCHAR2(1) DEFAULT 'N',
  CONSTRAINT P262_PK PRIMARY KEY (PROGRESSIVO,ANNO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 1M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 1M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P262_MOD730TESTATA.INTEGRATIVO IS
  'Modello 730 integrativo (S/N)';
COMMENT ON COLUMN P262_MOD730TESTATA.NON_LIQUID IS
  'Modello 730 non liquidabile (S/N)';

/*
Importi modello 730 (IRPEF da rimborsare,trattenere,acconti,IRPEF comunale,provinciale,regionale)
*/
CREATE TABLE P264_MOD730IMPORTI (
  PROGRESSIVO NUMBER,
  ANNO NUMBER(4),
  COD_TIPOIMPORTO VARCHAR2(5),
  COD_ENTE VARCHAR2(6),
  NUMERO_RATE NUMBER DEFAULT 1 NOT NULL,
  IMPORTO_INIZIALE NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_RETTIFICA NUMBER,
  IMPORTO_DOVUTO NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_CONG_POS NUMBER DEFAULT 0 NOT NULL,
  IMPORTO_CONG_NEG NUMBER DEFAULT 0 NOT NULL,
  INTERESSI_RATEIZZ NUMBER DEFAULT 0 NOT NULL,
  INTERESSI_RITARDO NUMBER DEFAULT 0 NOT NULL,
  MM_INIZIO_CONG NUMBER,
  MM_INIZIO_RETTIF NUMBER,
  CONSTRAINT P264_PK PRIMARY KEY (PROGRESSIVO,ANNO,COD_TIPOIMPORTO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 1M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 1M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P264_MOD730IMPORTI.COD_TIPOIMPORTO IS
  'Codice tipo importo';
COMMENT ON COLUMN P264_MOD730IMPORTI.IMPORTO_INIZIALE IS
  'Importo iniziale da rimborsare o trattenere';
COMMENT ON COLUMN P264_MOD730IMPORTI.IMPORTO_RETTIFICA IS
  'Importo di rettifica dell''importo iniziale';
COMMENT ON COLUMN P264_MOD730IMPORTI.IMPORTO_DOVUTO IS
  'Importo effettivo da rimborsare o trattenere';
COMMENT ON COLUMN P264_MOD730IMPORTI.IMPORTO_CONG_POS IS
  'Importo positivo gia'' inserito nei cedolini';
COMMENT ON COLUMN P264_MOD730IMPORTI.IMPORTO_CONG_NEG IS
  'Importo negativo gia'' inserito nei cedolini';
COMMENT ON COLUMN P264_MOD730IMPORTI.INTERESSI_RATEIZZ IS
  'Interessi pagati per rateizzazione trattenute';
COMMENT ON COLUMN P264_MOD730IMPORTI.INTERESSI_RITARDO IS
  'Interessi pagati per ritardato pagamento trattenute';
COMMENT ON COLUMN P264_MOD730IMPORTI.MM_INIZIO_CONG IS
  'Mese iniziale delle operazioni di conguaglio';
COMMENT ON COLUMN P264_MOD730IMPORTI.MM_INIZIO_RETTIF IS
  'Mese iniziale delle operazioni di conguaglio a rettifica';

ALTER TABLE P264_MOD730IMPORTI ADD CONSTRAINT P264_FK_P262
  FOREIGN KEY (PROGRESSIVO,ANNO) REFERENCES P262_MOD730TESTATA ON DELETE CASCADE;

/*
Mod. 1 ONAOSI
Integrità referenziali: T030_ANAGRAFICO  
*/
CREATE TABLE P266_MOD1ONAOSI (
  PROGRESSIVO NUMBER,
  ANNO NUMBER(4),
  PROFESSIONE VARCHAR2(5),
  IMPONIBILE_ATTUALE NUMBER DEFAULT 0 NOT NULL,
  CONTRIBUTO_ATTUALE NUMBER DEFAULT 0 NOT NULL,
  IMPONIBILE_PRECEDENTE NUMBER DEFAULT 0 NOT NULL,
  CONTRIBUTO_PRECEDENTE NUMBER DEFAULT 0 NOT NULL,
  NOTE LONG,
  CONSTRAINT P266_PK PRIMARY KEY (PROGRESSIVO,ANNO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 1M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 1M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P266_MOD1ONAOSI.PROFESSIONE IS
  'Professione: M=Medico, F=Farmacista, V=Veterinario';
COMMENT ON COLUMN P266_MOD1ONAOSI.IMPONIBILE_ATTUALE IS
  'Imponibile presunto anno attuale';
COMMENT ON COLUMN P266_MOD1ONAOSI.CONTRIBUTO_ATTUALE IS
  'Contributo presunto anno attuale';
COMMENT ON COLUMN P266_MOD1ONAOSI.IMPONIBILE_PRECEDENTE IS
  'Imponibile a saldo anno precedente';
COMMENT ON COLUMN P266_MOD1ONAOSI.CONTRIBUTO_PRECEDENTE IS
  'Contributo a saldo anno precedente';

ALTER TABLE P266_MOD1ONAOSI ADD CONSTRAINT P266_FK_T030
  FOREIGN KEY (PROGRESSIVO) REFERENCES T030_ANAGRAFICO;

/*
Rapporti di lavoro precedenti
Integrità referenziali: T030_ANAGRAFICO
*/
CREATE TABLE P268_RAPPORTIPRECEDENTI (
  PROGRESSIVO NUMBER,
  DATA_CEDOLINO_RP DATE,
  COD_FISCALE VARCHAR2(20),
  COD_CAUSACONGUAGLIO VARCHAR2(5),
  REDDITO_SI_DETRAZ NUMBER DEFAULT 0 NOT NULL,
  REDDITO_NO_DETRAZ NUMBER DEFAULT 0 NOT NULL,
  RITENUTE NUMBER DEFAULT 0 NOT NULL,
  RITENUTE_SOSP NUMBER DEFAULT 0 NOT NULL,
  ADDIZ_REG NUMBER DEFAULT 0 NOT NULL,
  ADDIZ_REG_SOSP NUMBER DEFAULT 0 NOT NULL,
  ADDIZ_COM NUMBER DEFAULT 0 NOT NULL,
  ADDIZ_COM_SOSP NUMBER DEFAULT 0 NOT NULL,
  GG_DETRAZ NUMBER DEFAULT 0 NOT NULL,
  IMPONIBILE_ASSIC_DETRAIBILI NUMBER DEFAULT 0 NOT NULL,
  CONSTRAINT P268_PK PRIMARY KEY (PROGRESSIVO,DATA_CEDOLINO_RP)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 1M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 1M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.COD_FISCALE IS
  'Codice fiscale del soggetto che ha corrisposto il reddito';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.COD_CAUSACONGUAGLIO IS
  'Causa che ha determinato il conguaglio del reddito corrisposto da altri soggetti';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.REDDITO_SI_DETRAZ IS
  'Redditi di lavoro dipendente o assimilati per cui e'' possibile fruire delle detrazioni';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.REDDITO_NO_DETRAZ IS
  'Redditi assimilati a quelli di lavoro dipendente per cui non e'' possibile fruire delle detrazioni';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.RITENUTE IS
  'Ritenute operate';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.RITENUTE_SOSP IS
  'Ritenute sospese';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.ADDIZ_REG IS
  'Addizionale regionale all''IRPEF trattenuta';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.ADDIZ_REG_SOSP IS
  'Addizionale regionale all''IRPEF sospesa';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.ADDIZ_COM IS
  'Addizionale comunale all''IRPEF trattenuta';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.ADDIZ_COM_SOSP IS
  'Addizionale comunale all''IRPEF sospesa';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.GG_DETRAZ IS
  'Giorni per i quali spettano le detrazioni per lavoro dipendente';
COMMENT ON COLUMN P268_RAPPORTIPRECEDENTI.IMPONIBILE_ASSIC_DETRAIBILI IS
  'Imponibile assicurazioni detraibili';

ALTER TABLE P268_RAPPORTIPRECEDENTI ADD CONSTRAINT P268_FK_T030
  FOREIGN KEY (PROGRESSIVO) REFERENCES T030_ANAGRAFICO;

/*
Redditi annualli
Integrità referenziali: T030_ANAGRAFICO
*/
CREATE TABLE P270_REDDITIANNUALI (
  PROGRESSIVO NUMBER,
  ANNO NUMBER, 
  REDDITO NUMBER DEFAULT 0 NOT NULL,
  CONSTRAINT P270_PK PRIMARY KEY (PROGRESSIVO,ANNO)
  USING INDEX STORAGE (pctincrease 0 initial 16K next 1M)
  TABLESPACE INDICI pctfree 10
)
STORAGE (pctincrease 0 initial 16K next 1M)
TABLESPACE LAVORO pctfree 10 pctused 40;

COMMENT ON COLUMN P270_REDDITIANNUALI.REDDITO IS
  'Reddito dell''anno per il calcolo della tassazione separata';

ALTER TABLE P270_REDDITIANNUALI ADD CONSTRAINT P270_FK_T030
  FOREIGN KEY (PROGRESSIVO) REFERENCES T030_ANAGRAFICO;
