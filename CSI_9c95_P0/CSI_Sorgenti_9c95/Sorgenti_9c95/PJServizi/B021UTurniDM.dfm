inherited B021FTurniDM: TB021FTurniDM
  OldCreateOrder = True
  Height = 225
  Width = 367
  inherited selProg: TOracleQuery
    Top = 20
  end
  object updT080: TOracleQuery
    SQL.Strings = (
      'UPDATE T080_PIANIFORARI'
      'SET    ORARIO = :ORARIO,'
      '       TURNO1 = :TURNO1,'
      '       TURNO2 = :TURNO2'
      'WHERE  PROGRESSIVO = :PROGRESSIVO'
      'AND    DATA = :DATA')
    Optimize = False
    Variables.Data = {
      04000000050000000E0000003A004F0052004100520049004F00050000000000
      0000000000000E0000003A005400550052004E004F0031000500000000000000
      000000000E0000003A005400550052004E004F00320005000000000000000000
      0000180000003A00500052004F0047005200450053005300490056004F000300
      000000000000000000000A0000003A0044004100540041000C00000000000000
      00000000}
    Left = 182
    Top = 84
  end
  object delT080: TOracleQuery
    SQL.Strings = (
      'DELETE FROM T080_PIANIFORARI'
      'WHERE  PROGRESSIVO = :PROGRESSIVO'
      'AND    (DATA between :DATA1 AND :DATA2'
      '        OR'
      '        (DATA = :DATA2 + 1 AND TURNO1EU = '#39'U'#39'))')
    Optimize = False
    Variables.Data = {
      0400000003000000180000003A00500052004F00470052004500530053004900
      56004F000300000000000000000000000C0000003A0044004100540041003100
      0C00000000000000000000000C0000003A00440041005400410032000C000000
      0000000000000000}
    Left = 251
    Top = 84
  end
  object selT080: TOracleDataSet
    SQL.Strings = (
      'SELECT T080.*, T030.MATRICOLA, T030.COGNOME, T030.NOME'
      'FROM   T080_PIANIFORARI T080, T030_ANAGRAFICO T030'
      'WHERE  T080.PROGRESSIVO = T030.PROGRESSIVO'
      'AND    T080.DATA BETWEEN :INIZIO AND :FINE'
      'ORDER BY T030.COGNOME, T030.NOME, T030.MATRICOLA, T080.DATA')
    Optimize = False
    Variables.Data = {
      04000000020000000E0000003A0049004E0049005A0049004F000C0000000000
      0000000000000A0000003A00460049004E0045000C0000000000000000000000}
    Left = 108
    Top = 20
  end
  object selOrario: TOracleDataSet
    SQL.Strings = (
      'SELECT DISTINCT T220.ORARIO, T021.ENTRATA, T021.USCITA'
      'FROM   T430_STORICO T430, '
      '       T030_ANAGRAFICO T030,'
      '       ('
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.LUNEDI ORARIO'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '        UNION ALL'
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.MARTEDI'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '        UNION ALL'
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.MERCOLEDI'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '        UNION ALL'
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.GIOVEDI'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '        UNION ALL'
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.VENERDI'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '        UNION ALL'
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.SABATO'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '        UNION ALL'
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.DOMENICA'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '        UNION ALL'
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.NONLAV'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '        UNION ALL'
      
        '        SELECT T220.CODICE,T220.DECORRENZA,T220.DECORRENZA_FINE,' +
        'T221.FESTIVO'
      
        '        FROM   T220_PROFILIORARI T220, T221_PROFILISETTIMANA T22' +
        '1'
      
        '        WHERE  T221.CODICE = T220.CODICE AND T221.DECORRENZA = T' +
        '220.DECORRENZA'
      '       ) T220,'
      '       T020_ORARI T020,'
      '       T021_FASCEORARI T021'
      'WHERE  :DATA between T430.DATADECORRENZA AND T430.DATAFINE'
      'AND    T030.PROGRESSIVO = T430.PROGRESSIVO'
      ':FILTRO'
      'AND    T220.CODICE = T430.PORARIO'
      'AND    :DATA between T220.DECORRENZA AND T220.DECORRENZA_FINE'
      'AND    T220.ORARIO is not null'
      'AND    T020.CODICE = T220.ORARIO'
      
        'AND    :DATA between T020.DECORRENZA AND T020F_GETDECORRENZAFINE' +
        '(T020.CODICE,T020.DECORRENZA)'
      'AND    T021.CODICE = T020.CODICE'
      'AND    T021.DECORRENZA = T020.DECORRENZA'
      'AND    T021.TIPO_FASCIA = '#39'PN'#39
      'ORDER BY T220.ORARIO, T021.ENTRATA, T021.USCITA')
    ReadBuffer = 5
    Optimize = False
    Variables.Data = {
      04000000020000000A0000003A0044004100540041000C000000000000000000
      00000E0000003A00460049004C00540052004F00010000000000000000000000}
    Left = 40
    Top = 84
  end
  object selT080Ins: TOracleDataSet
    SQL.Strings = (
      'SELECT T080.*, T080.ROWID'
      'FROM   T080_PIANIFORARI T080'
      'WHERE  T080.PROGRESSIVO = :PROG'
      'AND    T080.DATA between :DATA1 AND :DATA2'
      'ORDER BY DATA'
      '')
    Optimize = False
    Variables.Data = {
      04000000030000000A0000003A00500052004F00470004000000000000000000
      00000C0000003A00440041005400410031000C00000000000000000000000C00
      00003A00440041005400410032000C0000000000000000000000}
    Left = 112
    Top = 84
  end
  object insT380: TOracleQuery
    SQL.Strings = (
      'declare'
      'begin'
      '  select min(CODICE) into :TURNO '
      '  from T350_REGREPERIB '
      '  where TIPOLOGIA = '#39'R'#39
      '  and oreminuti(to_char(ORAINIZIO,'#39'hh24.mi'#39')) = :INIZIO'
      '  and oreminuti(to_char(ORAFINE,'#39'hh24.mi'#39')) = :FINE;'
      ''
      '  if :TURNO is not null then'
      '    delete from T380_PIANIFREPERIB '
      '    where PROGRESSIVO = :PROGRESSIVO'
      '    and DATA = :DATA;'
      '  '
      '    insert into T380_PIANIFREPERIB (PROGRESSIVO,DATA,TURNO1)'
      '    values (:PROGRESSIVO,:DATA,:TURNO);'
      '  end if;'
      'end;')
    Optimize = False
    Variables.Data = {
      0400000005000000180000003A00500052004F00470052004500530053004900
      56004F000300000000000000000000000A0000003A0044004100540041000C00
      000000000000000000000C0000003A005400550052004E004F00050000000000
      0000000000000E0000003A0049004E0049005A0049004F000300000000000000
      000000000A0000003A00460049004E004500030000000000000000000000}
    Left = 41
    Top = 136
  end
end
